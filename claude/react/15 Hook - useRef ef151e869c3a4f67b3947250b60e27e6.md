# 15. Hook - useRef

# 1. useRef

`useRef`ëŠ” ìˆœìˆ˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ê°’ì˜ ì ‘ê·¼ì€ `refContainer.current`ë¡œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
const refContainer = useRef(initialValue);
```

useRefëŠ” í¬ê²Œ 2ê°€ì§€ë¡œ ì‚¬ìš©ì´ ë©ë‹ˆë‹¤.

1. ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ ë˜ì–´ë„ ì´ˆê¸°í™” ë˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ” ê°’ì„ ì €ì¥í•´ì•¼í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. useRefë¥¼ í†µí•´ ì €ì¥ëœ ê°’ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ ë˜ì–´ë„ ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 
    
    <aside>
    ğŸ’¡ useStateì™€ useRef
    useStateë¥¼ í†µí•´ ê´€ë¦¬í•˜ëŠ”ê°’ ì—­ì‹œ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ì–´ë„ ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ì ì— ìˆì–´ì„œëŠ” useRefì™€ ë™ì¼í•œë°ìš”, ê°€ì¥ ê²°ì •ì ì¸ ì°¨ì´ëŠ” useStateì˜ ê°’ì´ ì—…ë°ì´íŠ¸ ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ì§€ë§Œ useRefì˜ ê°’ì€ ì—…ë°ì´íŠ¸ê°€ ë˜ì–´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒ ì…ë‹ˆë‹¤.
    ë”°ë¼ì„œ í™”ë©´ì— í‘œì‹œë˜ì–´ì•¼ í•˜ëŠ” ì •ë³´ë¥¼ ì €ì¥í•  ë•ŒëŠ” ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    
    </aside>
    
2. **ì»´í¬ë„ŒíŠ¸ì˜ íŠ¹ì • ìš”ì†Œì— ì§ì ‘ ì ‘ê·¼í•˜ê³  ì‹¶ì„ ë•Œ** useRefë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ DOM ë…¸ë“œì— ì ‘ê·¼í•˜ê³  ì‹¶ì„ë•ŒëŠ” `querySelector`ë‚˜ `getElementById`ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ Reactì—ì„œëŠ” `useRef`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 

# 2. useRefì™€ ë‹¤ë¥¸ ë³€ìˆ˜ë“¤ì˜ ì°¨ì´

```jsx
import React, { useState, useEffect, useRef } from 'react';

function Counter() {
  const [count, setCount] = useState(0)
  const [countTwo, setCountTwo] = useState(0)
  let countThree = useRef(0)
  let countFour = 0
  console.log(countThree)

  // ëœë”ë§ ë¨
  const handleCountUp = (e) => {
    setCount(count + 1)
    console.log(count) // setCountëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ -> useEffectë¡œ ë³€í™”ì˜ ë™ê¸°ì ì¸ ì¶”ì  ê°€ëŠ¥
  }
  // ëœë”ë§ ë¨
  const handleCountUpTwo = (e) => {
    setCountTwo(countTwo + 1)
    console.log(countTwo) // setCountTwoëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ -> useEffectë¡œ ë³€í™”ì˜ ë™ê¸°ì ì¸ ì¶”ì  ê°€ëŠ¥
  }
  // í´ë¦­í•˜ë©´ ë³€ìˆ˜ì˜ ê°’ì€ ì¦ê°€í•˜ì§€ë§Œ ëœë”ë§ì€ ë˜ì§€ ì•ŠìŒ
  const handleCountUpThree = (e) => {
    countThree.current = countThree.current + 1
    console.log(countThree.current)
  }
  // ëœë”ë§ ì•ˆë˜ê³  ë‹¤ë¥¸ stateê°€ ë³€í•´ì„œ ì¬ë Œë”ë§ ë˜ì–´ë„ 0ìœ¼ë¡œ ì´ˆê¸°í™”
  const handleCountUpFour = (e) => {
    countFour = countFour + 1
    console.log(countFour)
  }

  useEffect(() => {
    console.log('countê°€ ê°ì‹œë˜ê³  ìˆìŠµë‹ˆë‹¤.')
    console.log(`ê°ì‹œëœ ë³€ìˆ˜ : ${count}`)
  }, [count]) // countê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ê°ì‹œ
  
  
  return(
    <>
      <div>{count}</div>
      <button onClick={handleCountUp}>up!</button>
      <div>{countTwo}</div>
      <button onClick={handleCountUpTwo}>up!</button>
      <div>{countThree.current}</div>
      <button onClick={handleCountUpThree}>up!</button>
      <div>{countFour}</div>
      <button onClick={handleCountUpFour}>up!</button>
    </>
  )
}

function App() {
  return (
    <div>
      <Counter/>
    </div>
  );
}

export default App;
```

# 3. useRefë¡œ **ì»´í¬ë„ŒíŠ¸ì˜ íŠ¹ì • ìš”ì†Œì— ì§ì ‘ ì ‘ê·¼í•˜ê³  ì‹¶ì„ ë•Œ**

ìš°ì„  DOM APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
import React, { useState, useRef } from "react";

const App = () => {
  const [emailValue, setEmailValue] = useState(""); // email state ê°’
  const [pwValue, setPwValue] = useState(""); // pw state ê°’

  const inputCheck = (e) => {
    e.preventDefault()
    console.log(document.querySelectorAll('input'));
    setEmailValue(document.querySelectorAll('input')[0].value);
    setPwValue(document.querySelectorAll('input')[1].value);
  };

  return (
    <form onSubmit={inputCheck} style={{ display: "flex", flexDirection: "column" }}>
      <label>
        ì´ë©”ì¼ : <input type="email" />
      </label>
      <label>
        ë¹„ë°€ë²ˆí˜¸ : <input type="password" />
      </label>

      <button type="submit" style={{ width: "100px" }}>
        ë¡œê·¸ì¸
      </button>
      <span>ì…ë ¥í•œ ì´ë©”ì¼ : {emailValue}</span>
      <span>ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ : {pwValue}</span>
    </form>
  );
};

export default App;
```

### useRefë¥¼ ì‚¬ìš©í•´ ë´…ì‹œë‹¤!

1. ì´ë©”ì¼ inputê³¼ ë¹„ë°€ë²ˆí˜¸ inputì˜ ì…ë ¥ì´ ì™„ë£Œëœ í›„ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ `span` ë¶€ë¶„ì— ì…ë ¥í–ˆë˜ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³´ì—¬ì£¼ë ¤ê³  í•©ë‹ˆë‹¤.

buttonì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ `inputCheck`ì—ì„œ ë¹„ë°€ë²ˆí˜¸ì™€ ì´ë©”ì¼ì˜ ê°’ì„ ë°›ì•„ì™€ì„œ `setEmailValue`, `setPwValue`ë¥¼ ì‹¤í–‰í•´ì¤˜ì„œ ìƒíƒœê°’ì„ ë³€ê²½í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

```jsx
import React, { useState } from "react";

const App = () => {
  const [emailValue, setEmailValue] = useState(""); // email state ê°’
  const [pwValue, setPwValue] = useState(""); // pw state ê°’

  const inputCheck = (e) => {
    e.preventDefault();
  };

  return (
    <form onSubmit={inputCheck} style={{ display: "flex", flexDirection: "column" }}>
      <label>
        ì´ë©”ì¼ : <input type="email" />
      </label>
      <label>
        ë¹„ë°€ë²ˆí˜¸ : <input type="password" />
      </label>

      <button type="submit" style={{ width: "100px" }} >
        ë¡œê·¸ì¸
      </button>
      <span>ì…ë ¥í•œ ì´ë©”ì¼ : {emailValue}</span>
      <span>ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ : {pwValue}</span>
    </form>
  );
};

export default App;
```

ì´ë•Œ inputì˜ ê°’ì„ ê°€ì ¸ì˜¬ ë•Œ useRefë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. useRefë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•´ ì£¼ì„¸ìš”. 

```jsx
*import* React, { useState, useRef } *from* "react";
```

App ì»´í¬ë„ŒíŠ¸ ì•ˆì— `useRef`ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. 

```jsx
  const emailInput = useRef(null); // email inputì— ëŒ€í•œ useRef
  const pwInput = useRef(null); // pw inputì— ëŒ€í•œ useRef
```

ìƒì„±í•œ `useRef` ê°’ì„ ê°’ì„ ë°›ì•„ì˜¤ê³  ì‹¶ì€ íƒœê·¸ì—ê²Œ `ref` propsë¡œ ì „ë‹¬í•´ì¤ë‹ˆë‹¤.

```jsx
<label>
  ì´ë©”ì¼ : <input type="email" ref={emailInput} />
</label>
<label>
  ë¹„ë°€ë²ˆí˜¸ : <input type="password" ref={pwInput} />
</label>
```

ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ ì‹¤í–‰í•  `inputCheck`ì—ì„œ `emailInput`ê³¼ `pwInput`ì„ ì¶œë ¥í•´ ë´…ì‹œë‹¤.

![Untitled](Untitled%2036.png)

ì´ì œ `useRef.current.value`ë¥¼ ì‚¬ìš©í•˜ë©´ inputíƒœê·¸ë“¤ì˜ ê°’ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. emailì™€ pw ê°’ì„ `useState`ë¥¼ ì‚¬ìš©í•´ì„œ ìƒíƒœ ê°’ì„ ë°”ê¿”ì¤ë‹ˆë‹¤.

```jsx
const inputCheck = (e) => {
  e.preventDefault();
  console.log(emailInput);
  console.log(pwInput);
  setEmailValue(emailInput.current.value);
  setPwValue(pwInput.current.value);
};
```

```jsx
import React, { useRef, useState } from "react";

const App = () => {
  const emailInput = useRef(null); // email inputì— ëŒ€í•œ useRef
  const pwInput = useRef(null); // pw inputì— ëŒ€í•œ useRef

  const [emailValue, setEmailValue] = useState(""); // email state ê°’
  const [pwValue, setPwValue] = useState(""); // pw state ê°’

  const inputCheck = (e) => {
    e.preventDefault();
    setEmailValue(emailInput.current.value);
    setPwValue(pwInput.current.value);
  };

  return (
    <form onSubmit={inputCheck} style={{ display: "flex", flexDirection: "column" }}>
      <label>
        ì´ë©”ì¼ : <input type="email" ref={emailInput} />
      </label>
      <label>
        ë¹„ë°€ë²ˆí˜¸ : <input type="password" ref={pwInput} />
      </label>

      <button type="submit" style={{ width: "100px" }} >
        íšŒì›ê°€ì…
      </button>
      <span>{emailValue}</span>
      <span>{pwValue}</span>
    </form>
  );
};

export default App;
```

1. ì´ë©”ì¼ inputì´ë‚˜ ë¹„ë°€ë²ˆí˜¸ inputì˜ ì…ë ¥ì´ ì™„ë£Œë˜ì§€ ì•Šì€ ì±„ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì…ë ¥ë˜ì§€ ì•Šì€ input íƒœê·¸ì— focusí•´ë³´ë¡ í•©ì‹œë‹¤.

`useRef`ê°€ ê°€ë¦¬í‚¤ëŠ” íƒœê·¸ì— ì´ë²¤íŠ¸ë¥¼ ì¤„ ë•ŒëŠ” current ë‹¤ìŒì— ì´ë²¤íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤. `inputCheck`í•¨ìˆ˜ ì•ˆì—ì„œ ì‘ì„±í•´ ì£¼ì„¸ìš”.

```jsx
 if (emailInput.current.value === "") {
    alert("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
    emailInput.current.focus();
    return; // if, else ë¬¸ì— ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ setState ì‹¤í–‰ì—†ì´ ë°”ë¡œ return
  } else if (pwInput.current.value === "") {
    alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
    pwInput.current.focus();
    return;
  }
```

```jsx
import React, { useRef, useState } from "react";

const App = () => {
  const emailInput = useRef(null); // email inputì— ëŒ€í•œ useRef
  const pwInput = useRef(null); // pw inputì— ëŒ€í•œ useRef

  const [emailValue, setEmailValue] = useState(""); // email state ê°’
  const [pwValue, setPwValue] = useState(""); // pw state ê°’

  const inputCheck = (e) => {
    e.preventDefault();
    if (emailInput.current.value === "") {
      alert("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
      emailInput.current.focus();
      return;
    } else if (pwInput.current.value === "") {
      alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
      pwInput.current.focus();
      return;
    }
    setEmailValue(emailInput.current.value);
    setPwValue(pwInput.current.value);
  };

  return (
    <form onSubmit={inputCheck} style={{ display: "flex", flexDirection: "column" }}>
      <label>
        ì´ë©”ì¼ : <input type="email" ref={emailInput} />
      </label>
      <label>
        ë¹„ë°€ë²ˆí˜¸ : <input type="password" ref={pwInput} />
      </label>

      <button type="submit" style={{ width: "100px" }} >
        íšŒì›ê°€ì…
      </button>
      <span>{emailValue}</span>
      <span>{pwValue}</span>
    </form>
  );
};

export default App;
```

ì‹¤ìŠµ:

ì•„ë˜ì™€ ê°™ì€ ì½”ë“œê°€ ìˆìŠµë‹ˆë‹¤. useRefë¥¼ ì´ìš©í•´ ì½”ë“œë¥¼ ê°œì„ í•´ë³´ê³ , stop ë²„íŠ¼ì„ ëˆ„ë¥¸ í›„, í˜„ì¬ ì´ˆì—ì„œ ë‹¤ì‹œ ì´ì–´ì„œ ì§„í–‰í•˜ê¸°, ì‹œê°„ reset ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë´…ì‹œë‹¤!

```jsx
import { useState } from "react";

export default function Stopwatch() {
  // ì‹œì‘í•œ ì‹œê°„
  const [startTime, setStartTime] = useState(null);
  // í˜„ì¬ ì‹œê°„ 
  const [now, setNow] = useState(null);
  // ì¸í„°ë²Œí•¨ìˆ˜ì˜ id
  const [intervalId, setIntervalId] = useState(null);

  function handleStart() {
    setStartTime(Date.now());
    setNow(Date.now());

    setIntervalId(setInterval(() => {
      setNow(Date.now());
    }, 10));

  }

  function handleStop() {
    clearInterval(intervalId);
  }

  let secondsPassed = 0;
  if (startTime !== null && now !== null) {
    secondsPassed = (now - startTime) / 1000; // ê¸°ë³¸ ë‹¨ìœ„ê°€ ë°€ë¦¬ì„¸ì»¨ë“œì´ê¸° ë•Œë¬¸ì— ì´ˆë‹¨ìœ„ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ 1000ì„ ë‚˜ëˆ•ë‹ˆë‹¤.
  }

  return (
    <>
      <h1>Time passed: {secondsPassed.toFixed(3)}</h1>
      <button onClick={handleStart}>Start</button>
      <button onClick={handleStop}>Stop</button>
    </>
  );
}

```

ì‹¤ìŠµ2:  modal íƒœê·¸ë¥¼ ì´ìš©í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³  ë¦¬ì•¡íŠ¸ì—ì„œ showModal(), close() ê°™ì€ native ë©”ì„œë“œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ ë³´ì„¸ìš”.

```html
<dialog id="myDialog">
    <form method="dialog">
        <h2>Dialog</h2>
        <p>This is HTML dialog</p>
        <button>OK!</button>
    </form>
</dialog>
```