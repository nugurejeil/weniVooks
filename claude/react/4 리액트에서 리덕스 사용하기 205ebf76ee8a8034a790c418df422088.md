# 4. ë¦¬ì•¡íŠ¸ì—ì„œ ë¦¬ë•ìŠ¤ ì‚¬ìš©í•˜ê¸°

# 1. ì„¤ì¹˜í•˜ê³  ê¸°ë³¸í™˜ê²½ ì„¸íŒ…

create-react-app ì„¤ì¹˜ í›„ ë¦¬ì•¡íŠ¸ìš© ë¦¬ë•ìŠ¤ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npx create-react-app react-redux --template basic-react
npm install redux
npm install react-redux
```

```jsx
function App() {
  return (
    <div className="App">
      <h1>test2</h1>
    </div>
  );
}

export default App;
```

```jsx
import React from 'react';
// import ReactDOM from 'react-dom'; //êµ¬ë²„ì „
import { createRoot } from 'react-dom/client';
import App from './App';

const container = document.getElementById('root');
const root = createRoot(container);
root.render(<App tab="home" />);
```

# 2. í´ë” ì„¸íŒ…

src í´ë” ì•ˆì— ì•„ë˜ì™€ ê°™ì´ 2ê°œì˜ í´ë”ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

- components : ì»´í¬ë„ŒíŠ¸ë¥¼ ë„£ì„ í´ë”ì…ë‹ˆë‹¤.
- modules : reducerë¥¼ ë§Œë“¤ê³  í†µí•©ëœ reducerë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤.

# 3. êµ¬í˜„í•˜ê¸°

## 3.1 modules ë§Œë“¤ê¸°

ìƒí’ˆ êµ¬ë§¤ ê°œìˆ˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ë¦¬ë“€ì„œì™€ ì¬ê³ ê°€ ë‹¤ ë–¨ì–´ì¡Œì„ ë•Œ ë‚˜ì˜¤ëŠ” ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ë§Œë“¤ ê³„íšì…ë‹ˆë‹¤.

```jsx
// ì•¡ì…˜ ìƒì„±í•¨ìˆ˜
export const addNumber = () => {
    return { type: "ADD" }
};

export const substractNumber = () => {
    return { type: "SUBSTRACT" }
};

// ì´ˆê¸° ê°’
const initialState = {
    stock: 100,
    goods: 1
};

// ë¦¬ë“€ì„œ
const goodsReducer = (state = initialState, action) => {
    console.log(action)
    console.log(action.type)
    console.log(state)
    switch (action.type) {
        case "ADD":
            return {
                ...state,
                stock : state.stock - 1,
                goods : state.goods + 1,
            }
        case "SUBSTRACT":
            return {
                ...state,
                stock : state.stock + 1,
                goods : state.goods - 1,
            }
        default:
            return state
    }
};

export default goodsReducer
```

```jsx
// ì•¡ì…˜ ìƒì„±í•¨ìˆ˜
export const sale = () => {
    return { type: "SALE" };
};

export const soldout = () => {
    return { type: "SOLD_OUT" };
};

// ì´ˆê¸° ê°’
const initialState = {
    message: 'íŒë§¤ì¤‘!!',
};

// ë¦¬ë“€ì„œ
const stockReducer = (state = initialState, action) => {
    switch (action.type) {
        case "SALE":
            return {
                ...state,
                message : 'íŒë§¤ì¤‘!!'
            }
        case "SOLD_OUT":
            return {
                ...state,
                message : 'ì™„íŒ!!'
            }
        default:
            return state;
    }
};

export default stockReducer;
```

```jsx
import { combineReducers } from 'redux';
import goodsReducer from './goodsCounter';
import stockReducer from './stockCounter';

const rootReducer = combineReducers({
    goodsReducer,
    stockReducer
});

export default rootReducer;
```

<aside>
ğŸ¤”

**combineReducers**

`combineReducers`ëŠ” ë¦¬ë•ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¡œ, ì—¬ëŸ¬ ê°œì˜ ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì˜ ë¦¬ë“€ì„œë¡œ ê²°í•©í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœê°€ ë³µì¡í•´ì§ˆìˆ˜ë¡ í•˜ë‚˜ì˜ ë¦¬ë“€ì„œë¡œ ëª¨ë“  ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.
- `combineReducers`ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒíƒœì˜ ê° ë¶€ë¶„ì„ ë‹´ë‹¹í•˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ë¦¬ë“€ì„œë¥¼ ë§Œë“¤ê³  ì´ë“¤ì„ í•˜ë‚˜ë¡œ ê²°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê²°í•©ëœ ë¦¬ë“€ì„œëŠ” ë£¨íŠ¸ ë¦¬ë“€ì„œ, ì‘ì€ ë¦¬ë“€ì„œë¥¼ ì„œë¸Œ ë¦¬ë“€ì„œë¡œ í˜¸ì¹­í•©ë‹ˆë‹¤.
</aside>

## 3.2 ì´ˆê¸° ì„¸íŒ… í™•ì¸í•˜ê¸°

```jsx
import React from 'react';
// import ReactDOM from 'react-dom'; //êµ¬ë²„ì „
import { createRoot } from 'react-dom/client';
import App from './App';
import { createStore } from 'redux';
import rootReducer from './modules';

const store = createStore(rootReducer);
console.log(store.getState());

const container = document.getElementById('root');
const root = createRoot(container);
root.render(<App tab="home" />);
```

<aside>
ğŸ¤”

Reduxì˜ `createStore` í•¨ìˆ˜ëŠ” ë” ì´ìƒ ê¶Œì¥ë˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” Redux Toolkitì˜ ë„ì…ê³¼ í•¨ê»˜ ë³€ê²½ëœ ì‚¬í•­ì…ë‹ˆë‹¤. 

</aside>

`npm start`ë¥¼ í†µí•´ í”„ë¡œì íŠ¸ë¥¼ êµ¬ë™ì‹œí‚¨ ë‹¤ìŒ ì½˜ì†”ì°½ì—ì„œ ì´ˆê¸°ê°’ì´ ì œëŒ€ë¡œ ì„¸íŒ…ë˜ëŠ”ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”.

```bash
npm start
```

![Untitled](Untitled%2065.png)

ì„¸íŒ…ì´ í™•ì¸ë˜ì—ˆë‹¤ë©´ `import { Provider } from 'react-redux'` ì½”ë“œë¥¼ ìœ„ì— ì‚½ì…í•˜ê³  root.renderì— `<Provider store={store}>`ì½”ë“œë¡œ `<App>`ì„ ê°ì‹¸ì£¼ì„¸ìš”. ì´ì œ Appì—ì„œ ë Œë”ë§ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ storeì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
import React from 'react';
// import ReactDOM from 'react-dom'; //êµ¬ë²„ì „
import { createRoot } from 'react-dom/client';
import App from './App';
import { createStore } from 'redux';
import rootReducer from './modules';
import { Provider } from 'react-redux';

const store = createStore(rootReducer);
console.log(store.getState());

const container = document.getElementById('root');
const root = createRoot(container);
root.render(
    <Provider store={store}>
        <App tab="home" />
    </Provider>,
);
```

<aside>
ğŸ¤”

**Provider**

`Provider`ëŠ” Redux ìŠ¤í† ì–´ë¥¼ React ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì— ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìŠ¤í† ì–´ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì€ `useSelector`í•¨ìˆ˜ë¥¼ í†µí•´ ìŠ¤í† ì–´ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

</aside>

## 3.3 ì»´í¬ë„ŒíŠ¸ ì—°ê²°í•˜ê¸°

ì´ì œ App.jsxë¡œ ì™€ì„œ ì•„ë˜ì™€ ê°™ì´ componentë¥¼ í•˜ë‚˜ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. ê·¸ ì•„ë˜ ìˆëŠ” ì½”ë“œëŠ” GoodsCounter ì»´í¬ë„ŒíŠ¸ ì½”ë“œì…ë‹ˆë‹¤. App.jsë¡œ ë˜ì–´ ìˆë‹¤ë©´ ê·¸ëŒ€ë¡œ ì§„í–‰í•´ë„ ë¬´ë°©í•˜ì§€ë§Œ í™•ì¥ìë¥¼ jsxë¡œ ë°”ê¿”ì£¼ì„¸ìš”.

```jsx
import GoodsCounter from "./components/GoodsCounter";

function App() {
  return (
    <div className="App">
      <h1>test2</h1>
      <GoodsCounter/>
    </div>
  );
}

export default App;
```

```jsx
import { useSelector, useDispatch, shallowEqual } from 'react-redux'
import { addNumber, substractNumber } from '../modules/goodsCounter'

function GoodsCounter() {

    // useSelector : storeì˜ ìƒíƒœ ì¡°íšŒ Hook
    const { stock, goods } = useSelector(state => ({
        stock: state.goodsReducer.stock,
        goods: state.goodsReducer.goods,
    }), shallowEqual);
    console.log(stock, goods)

    // useDispatch : storeì˜ dispatchë¥¼ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Hook
    const dispatch = useDispatch()

    const onAddNumber = () => dispatch(addNumber())
    const onSubstractNumber = () => dispatch(substractNumber())

    return (
        <div>
            <h2>ë”¥ëŸ¬ë‹ ê°œë°œì ë¬´ë¦ ë‹´ìš”</h2>
            <span><strong>17,500</strong>ì›</span>
            <div>
                <button type="button" onClick={onSubstractNumber}>MINUS</button>
                <span>{goods}</span>
                <button onClick={onAddNumber}>PLUS</button>
            </div>
            <div>
                ì´ ìˆ˜ëŸ‰ <strong>{goods}</strong>
            </div>
            <div>
                <strong>{goods * 17500}</strong>ì›</div>
            <div>
                ì¬ê³  <strong>{stock}</strong>
            </div>
        </div>
    )
}

export default GoodsCounter
```

<aside>
ğŸ¤”

**useSelector**

`useSelector`ëŠ” React Reduxì—ì„œ ì œê³µí•˜ëŠ” í›…ìœ¼ë¡œ, í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ Redux ìŠ¤í† ì–´ì˜ ìƒíƒœë¥¼ ì½ì–´ì˜¤ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. 

`useSelector`ëŠ” ì„ íƒì í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤. ì„ íƒì í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¡œ ìŠ¤í† ì–´ì˜ ìƒíƒœê°’ì´ ì°¸ì¡°ë©ë‹ˆë‹¤.

- ê°ì²´ ë°˜í™˜ ì‹œì˜ ë¬¸ì œ:
    - ì„ íƒì í•¨ìˆ˜ì—ì„œ ìƒˆë¡œìš´ ê°ì²´(state ê°’)ë¥¼ ë°˜í™˜í•  ë•Œë§ˆë‹¤, ì´ ê°ì²´ëŠ” ìƒˆë¡œìš´ ì°¸ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì‹¤ì œ ìƒíƒœê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ë”ë¼ë„ `useSelector`ëŠ” í•­ìƒ ë³€ê²½ë˜ì—ˆë‹¤ê³  íŒë‹¨í•©ë‹ˆë‹¤.
    - ìƒíƒœê°€ "ë³€ê²½ë˜ì—ˆë‹¤"ê³  íŒë‹¨ë˜ë©´, React ReduxëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§ í•˜ê¸° ë•Œë¬¸ì—, ì‹¤ì œë¡œ ë°ì´í„°ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ëŠ”ë°ë„ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `shallowEqual`
    - stateì˜ ê°ì²´ êµ¬ì¡°ê°€ ê°™ê³  ê° ì†ì„±ì˜ ê°’ì´ ë™ì¼í•˜ë‹¤ë©´, ë‘ ê°ì²´ë¥¼ ê°™ë‹¤ê³  íŒë‹¨í•©ë‹ˆë‹¤.
</aside>

ì‹¤í–‰ë˜ëŠ” í™”ë©´ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.

![Untitled](Untitled%2066.png)

## 3.4 ë‚¨ì€ ê³¼ì œ

ì¬ê³ ê°€ 0ì´ ë˜ë©´ â€˜ì¬ê³  ì—†ìŒâ€™ì´ ë– ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì¬ê³ ë¥¼ 10ê°œë¡œ ë§Œë“¤ì–´ì£¼ì‹œê³  **ì—¬ëŸ¬ë¶„ì´ ì§ì ‘ ì´ë¥¼ êµ¬í˜„**í•´ ë³´ì„¸ìš”. (ì•„ë˜ ì••ì¶• íŒŒì¼ì€ redux ê°œë°œì ë„êµ¬ê°€ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.)

- `íŒë§¤ì¤‘`ì´ ëœ° ìˆ˜ ìˆë„ë¡ ì»´í¬ë„ŒíŠ¸ 1ê°œë¥¼ ë§Œë“¤ì–´ App.jsë¥¼ ì—°ê²°í•´ ì£¼ì„¸ìš”.
- ì—°ê²°ëœ ì»´í¬ë„ŒíŠ¸ì—ì„œ stateì— stockReducerë¡œ ì ‘ê·¼í•˜ì—¬ messageë¥¼ ì¶œë ¥í•˜ì„¸ìš”.
- ì¬ê³ ê°€ ë‹¤ ë–¨ì–´ì§€ë©´ `ì™„íŒ!!`ì´ ë– ì•¼ í•©ë‹ˆë‹¤.
- íŒë§¤ ìˆ˜ëŸ‰ì´ ë§ˆì´ë„ˆìŠ¤ê°€ ë˜ì§€ ì•Šê²Œ í•´ì£¼ì„¸ìš”.
- ì¬ê³  ì†Œì§„ë˜ì—ˆë‹¤ê°€ íŒë§¤ìˆ˜ëŸ‰ì´ ì¤„ì–´ ì¬ê³ ê°€ í™•ë³´ë˜ì—ˆë‹¤ë©´ íŒë§¤ì¤‘ì´ ë˜ê²Œ í•´ì£¼ì„¸ìš”.

![Untitled](Untitled%2067.png)

ì¼ë°˜ì ìœ¼ë¡œ ê°œë°œí•œë‹¤ë©´ **ë¬´í•œ ëœë”ë§ ë©ë‹ˆë‹¤**. ì´ë¥¼ ì•ì—ì„œ ë°°ìš´ ê°œë…ìœ¼ë¡œ ì–´ë–»ê²Œ í•´ê²° í•  ìˆ˜ ìˆëŠ”ì§€ê°€ í•µì‹¬ì…ë‹ˆë‹¤.

- êµ¬í˜„ ì „ ì „ì²´ ì½”ë“œ(ì•ì—ì„œ ì‹¤ìŠµí•œ ê²ƒì´ ë™ì‘í•˜ì§€ ì•Šì•˜ë‹¤ë©´ ì•„ë˜ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì•„ `npm i`ë¥¼ ì…ë ¥í•˜ì‹  í›„ ì‹¤ìŠµí•´ ì£¼ì„¸ìš”.)
    
    [my-app_êµ¬í˜„ì „_ì „ì²´ì½”ë“œ.zip](my-app_%EA%B5%AC%ED%98%84%EC%A0%84_%EC%A0%84%EC%B2%B4%EC%BD%94%EB%93%9C.zip)
    
- ê³¼ì œ ì™„ë£Œ íŒŒì¼
    
    [my-app.zip](my-app.zip)
    

# 4. Redux ê°œë°œì ë„êµ¬ ì ìš©

```bash
npm i redux-devtools-extension
```

```jsx
import React from 'react';
// import ReactDOM from 'react-dom'; //êµ¬ë²„ì „
import { createRoot } from 'react-dom/client';
import App from './App';
import { createStore } from 'redux';
import rootReducer from './modules';
import { Provider } from 'react-redux';
import { composeWithDevTools } from 'redux-devtools-extension'; // ë¦¬ë•ìŠ¤ ê°œë°œì ë„êµ¬

const store = createStore(rootReducer, composeWithDevTools());
console.log(store.getState());

const container = document.getElementById('root');
const root = createRoot(container);
root.render(
    <Provider store={store}>
        <App tab="home" />
    </Provider>,
);
```

![Untitled](Untitled%2068.png)