# 7. Hook Basic - useState

## 1. 컴포넌트에 데이터의 ‘상태’를 반영해봅시다.

버튼을 만들고 클릭을 할 때마다 변수에 1씩 더해주는 함수를 만들고 로그를 출력해 보도록 하겠습니다. ‘좋아하는 색’ 하단에 버튼을 만들어주고, 버튼에 클릭 이벤트를 넣도록 하겠습니다. 

이전 챕터에서 여러 개의 단어가 결합되어 있으면 대문자로 구분했던 것 기억하시나요? html에서는 `<button onclick="함수이름">`으로 선언하던 것과 달리 리액트에서는 `<button onClick={함수}>`로 선언합니다. 

```jsx
function Resume(props) {
    let like = 0;

    function clickLike() {
        like += 1;
        console.log(like);
    }

    const myColor = props.color;
    const styleColor = {color:myColor};

    return(
        <div style={{border:"solid 1px", width:"500px"}}>
            <h1>{props.name} 자기소개서</h1>
            <h1>{props.hello}</h1>
            <h2>취미 : {props.hobby}</h2>
            <h2>좋아하는 음식 : {props.food}</h2>
            <h2>좋아하는 색 : <span style={styleColor}>{myColor}</span></h2>
            <button onClick={clickLike}>like <span>{like}</span></button>
        </div>
    )
}

export default Resume;
```

![Untitled](Untitled%2015.png)

`like` 버튼을 누를 때마다 만들어둔 변수가 변하는 것을 개발자 도구를 켜보시면 보실 수 있습니다. 하지만 like의 숫자는 변하지 않는 것을 알 수 있습니다.

 

<aside>
💡 여기서 `onClick`처럼 react에서 다루는 모든 이벤트는 아래 리액트 메뉴얼을 참고해 주세요.

[SyntheticEvent - React](https://reactjs.org/docs/events.html)

</aside>

변수의 값이 바뀌어도 페이지는 랜더링하지 않기 때문인데요. **모든 변수가 변할때마다 컴포넌트를 업데이트 한다면 많은 리소스가 낭비**될 것입니다. 그래서 **특정 변수를 지정하여 그 변수가 변할 때마다 컴포넌트를 업데이트하라는 명령**을 내려주어야 합니다.

<aside>
💡 앞서 살펴본 것처럼 React의 elements 즉, 가상돔은 **자바스크립트 객체 형태**입니다. 

컴포넌트의 변화를 감지하고 변경사항을 화면에 반영하는 것은 많은 자원이 소모되는 작업일 수 있습니다. 때문에 리액트는 컴포넌트를 업데이트 해야할 때를 결정하는 특별한 메커니즘을 가지고 있습니다.

useState를 통해 상태를 변경하면, 리액트는 해당 컴포넌트의 재렌더링을 예약합니다.
재렌더링을 하게 될때 리액트는 useState 이전과 이후의 모습을 서로 비교합니다.
이를 ‘재조정**(reconciliation)’**을 거친다고 표현합니다.   ****

</aside>

<aside>
🧐 재조정(**reconciliation)
reconciliation**은 ****양자를 서로 비교 대조해서 차이를 없애고 같은 값이 되도록 하는 과정을 의미하는 회계 용어입니다. 혹은 종교에서의 고해성사를 의미하기도 합니다.

React의 재조정은 Virtual DOM을 사용하여 React 컴포넌트 트리를 비교하고 최적화하는 프로세스입니다. React는 컴포넌트가 업데이트될 때 마다 Virtual DOM을 사용하여 이전 버전의 컴포넌트 트리와 새 버전의 컴포넌트 트리를 비교합니다.

reconciliation 프로세스는 이전 버전의 컴포넌트 트리와 새 버전의 컴포넌트 트리를 비교하여 다음과 같은 작업을 수행합니다.

1. 컴포넌트의 타입이 같은지 비교합니다.
2. 컴포넌트의 속성(prop)이 변경되었는지 비교합니다.
3. 컴포넌트의 자식 요소가 변경되었는지 비교합니다.

이러한 비교 작업을 통해 React는 변경된 부분만 업데이트하고, 나머지 부분은 그대로 유지합니다. 이렇게 하면 React는 DOM 조작을 최소화하고 더 빠르고 효율적인 애플리케이션을 만들 수 있습니다.

정리하자면, reconciliation 프로세스를 통해 React는 컴포넌트를 업데이트하여 즉각적으로 반응하는 사용자 인터페이스를 만들 수 있습니다. 이것이 바로 React가 다른 프론트엔드 라이브러리와 차별화되는 중요한 기능 중 하나입니다.
참고 : [https://ko.legacy.reactjs.org/docs/reconciliation.html](https://ko.legacy.reactjs.org/docs/reconciliation.html)

</aside>

## 2. useState 사용해보기

변수의 값이 변경될 때마다 페이지를 업데이트 하도록 만들어주는 것이 useState입니다.

```jsx
import React, { useState } from 'react';

function Resume(props) {
    const [like, setLike] = useState(0);
		// console.log(useState(0));

    const myColor = props.color;
    const styleColor = {color:myColor};
    return(
        <div style={{border:"solid 1px", width:"500px"}}>
            <h1>{props.name} 자기소개서</h1>
            <h1>{props.hello}</h1>
            <h2>취미 : {props.hobby}</h2>
            <h2>좋아하는 음식 : {props.food}</h2>
            <h2>좋아하는 색 : <span style={styleColor}>{myColor}</span></h2>
            <button onClick={clickLike}>like <span>{like}</span></button>
        </div>
    );
}
export default Resume;
```

먼저 useState를 React에서 import 하기 위해 import 구문에 `{useState}`를 추가합니다. 

`useState`를 실행하면 **state 변수와 state 변수의 상태를 바꿔줄 수 있는 함수가 반환**됩니다. 그러면 구조 분해 할당 문법을 이용해 `like`와 `setLike`에 변수와 함수를 할당하게 됩니다. 꼭 구조분해할당을 사용할 필요는 없지만 관습으로 사용합니다.

`useState`의 괄호 안에는 **초기값**을 넣을 수 있습니다. 0을 넣게 되면 `like`의 초기값은 `0`이 되고, ""을 넣게 되면 `like`의 초기값은 `""`가 됩니다. 

아래 코드를 보면 `like`는 0으로 초기화되어있는 값이고, `setLike`는 `like`값을 변경하기 위한 함수임을 알 수 있습니다.

```jsx
const [like, setLike] = useState(0);
```

`useState`를 사용하게 되면 **`setState(예시에서는 setLike)`를 통해 값이 변경될 때 리액트는 자동으로 해당 컴포넌트를 다시 랜더링**해줍니다.

리액트는 어떤 상태(state)가 변경되면 그 부분을 다시 랜더링하는 특징이 있기 때문에 화면에서 계속 바뀌는 부분은 대부분 state를 사용합니다. 또한 다시 랜더링 할 필요가 없는 데이터는 useState를 사용하지 않음으로 자원을 아낄 수 있습니다.

예시) 클릭 이벤트가 일어날 때마다 좋아요 숫자가 바뀌는 것, 데이터가 바뀔 때마다 바뀐 데이터를 보여주는 것

```jsx
import React, { useState } from "react";

function Resume(props) {
  const [like, setLike] = useState(0);

  function clickLike() {
		// +1 은 기존의 like 값과 1을 더해 새로운 값을 반환하는것이고
    // ++ 변수의 값 자체를 직접적으로 변경하려는 시도입니다.
    setLike(like + 1);
  }

  const myColor = props.color;
  const styleColor = { color: myColor };

  return (
    <div style={{ border: "solid 1px", width: "500px" }}>
      <h1>{props.name} 자기소개서</h1>
      <h1>{props.hello}</h1>
      <h2>취미 : {props.hobby}</h2>
      <h2>좋아하는 음식 : {props.food}</h2>
      <h2>
        좋아하는 색 : <span style={styleColor}>{myColor}</span>
      </h2>
      <button onClick={clickLike}>like</button> <span>{like}</span>
    </div>
  );
}

export default Resume;
```

<aside>
💡 우리가 사용하고 있는 useState와 같은 메소드는 Hook 이라고 부릅니다. Hook이라는 개념은 리엑트 16.8 Version부터 나온 개념입니다. Hook은 접두사로 use가 붙으며, 함수형 컴포넌트에서 컴포넌트의 lifecycle과 state와 관련된 함수를 사용할 수 있게 해줍니다.

useState, useEffect, useMemo, useCallback, useRef 등 다양한 Hook이 있습니다.
앞으로 차근차근 배워봅시다!

</aside>

## 3. Quiz

1. `like` 버튼을 눌렀을 때 'Like'가 나타나고, 다시 `like` 버튼을 눌렀을 때는 'Like'가 사라지도록 바꿔보세요!

![like 버튼을 클릭했을 때](Untitled%2016.png)

like 버튼을 클릭했을 때

![like 버튼을 다시 클릭했을 때](Untitled%2017.png)

like 버튼을 다시 클릭했을 때

- 정답
    
    ```jsx
    import React, { useState } from "react";
    
    function Resume(props) {
      const [like, setLike] = useState("");
      function clickLike() {
        if (like === "") {
          setLike("Like");
        } else {
          setLike("");
        }
      }
      const myColor = props.color;
      const styleColor = { color: myColor };
      return (
        <div style={{ border: "solid 1px", width: "500px" }}>
          <h1>{props.name} 자기소개서</h1>
          <h1>{props.hello}</h1>
          <h2>취미 : {props.hobby}</h2>
          <h2>좋아하는 음식 : {props.food}</h2>
          <h2>
            좋아하는 색 : <span style={styleColor}>{myColor}</span>
          </h2>
          <button onClick={clickLike}>like</button> <span>{like}</span>
        </div>
      );
    }
    
    export default Resume;
    ```
    

1. 기분의 상태를 표시하는 앱을 만들어보겠습니다. 상단의 버튼을 누르면 해당기분이 아래 정보창에 표시되도록 만들어보세요!
    - 제작 가이드
        - 컴포넌트를 만들어주세요. 기본적으로 App.js, 버튼, 버튼 리스트, 정보창 등의 컴포넌트가 필요할겁니다. 다 만들어지면 화면에 잘 랜더링 되는지 배치해봅시다.
        - 스타일링을 해봅시다. 만들어진 컴포넌트마다 스타일 파일을 붙여서 구현해보세요.
        - 기능을 구현해봅시다. 버튼을 클릭 했을 때 해당 버튼의 기분이 하단 정보창에 표시되도록 해보세요.
    
    ![스크린샷 2023-05-08 오전 6.12.29.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-05-08_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_6.12.29.png)