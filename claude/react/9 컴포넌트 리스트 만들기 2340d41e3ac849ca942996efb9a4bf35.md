# 9. 컴포넌트 리스트 만들기

# 1. 컴포넌트 리스트의 필요성

```jsx
function App() {
  return (
    <Hello name="licat"/>
  );
}

function Hello(props) {
	const name = props.name;
  return(
    <div>
      <h1>안녕, {name} 1호</h1>
    </div>
  )
}

export default App;
```

한 번에 수 많은 데이터가 존재한다면 어떨까요? 만약 10호까지 있다면 아래와 같이 코드를 작성할 수 있습니다. 하지만 이런 방식은 같은 코드를 반복하여 작성해야 합니다.

```jsx
function App() {
  return (
    <Hello name="licat"/>
  );
}

function Hello(props) {
	const name = props.name;

  return(
    <div>
      <h1>안녕, {name} 1호</h1>
      <h1>안녕, {name} 2호</h1>
      <h1>안녕, {name} 3호</h1>
      <h1>안녕, {name} 4호</h1>
      <h1>안녕, {name} 5호</h1>
      <h1>안녕, {name} 6호</h1>
      <h1>안녕, {name} 7호</h1>
      <h1>안녕, {name} 8호</h1>
      <h1>안녕, {name} 9호</h1>
      <h1>안녕, {name} 10호</h1>
    </div>
  )
}

export default App;
```

# 2. 컴포넌트 리스트 만들기

스타일을 반영하지 않고 단순히 1호에서 10호까지의 결과를 나타낸 컴포넌트 리스트를 만들어 보도록 하겠습니다. map 함수를 이용해 봅시다! 

<aside>
💡 `map()` 메서드는 리스트 내의 모든 요소 각각에 대하여 주어진 함수를 호출한 결과를 모아 새로운 배열을 반환합니다. `[리스트].map((i)=>{return 로직}`

</aside>

```jsx
function App() {
  return (
    <Hello name="licat"/>
  );
}

function Hello(props) {
	const name = props.name;
  const num = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]; //1~10호를 만들 것입니다.
	
  // list map을 이용하여 h1 태그들의 리스트를 만듭니다.
  const numComponentsArray = num.map((i)=><h1>안녕, {name} {i}호</h1>);

  return(
    <div>
      {numComponentsArray}
    </div>
  )
}

export default App;
```

코드를 실행하면 아래와 같이 우리가 원하던 결과를 얻을 수 있습니다.

![Untitled](Untitled%2018.png)

하지만 개발자 도구를 보면 경고가 뜬 모습을 확인할 수 있습니다.

![Untitled](Untitled%2019.png)

**"리스트 각 요소가 고유한 key 값을 가지지 않았다."**라는 경고 메세지입니다.  key 값을 넣어주지 않았기 때문에 에러가 발생한 것입니다. 컴포넌트 안에서 리스트를 렌더링할 때는 꼭 key 값을 넣어줘야 합니다.

키값을 넣어주는 이유는 리엑트에서 랜더링 작업을 진행했을 때 어떤 요소에 변동이 있다면 그 요소만 새로 그려주기 위함입니다. key가 없다면 하나의 요소가 변경이 되어도 array에 담긴 요소를 모두 다시 그려줍니다. 

[리스트와 Key - React](https://ko.reactjs.org/docs/lists-and-keys.html#keys)

[재조정 (Reconciliation) - React](https://ko.reactjs.org/docs/reconciliation.html#recursing-on-children)

key 값은 일반적으로 배열의 id 값을 넣어줍니다. 고유의 값을 찾을 수 없다면 인덱스를 key로 사용하면 되지만 단순히 에러를 제거하기 위한 미봉책일 뿐 권장하지 않습니다.

<aside>
💡 key 값은 동일한 컴포넌트 리스트에서만 ‘유일값’이면 됩니다.

</aside>

```jsx
import './App.css';

function App() {
  return (
    <Hello name="licat"/>
  );
}

function Hello(props) {
	const name = props.name;
  const num = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]; //1~10호를 만들 것입니다.
	
  // list map을 이용하여 h1 태그들의 리스트를 만듭니다.
  const numComponentsArray = num.map((i) => (
    <h1 key={i}>
      안녕, {name} {i}호
    </h1>
  ));

  return(
    <div>
      {numComponentsArray}
    </div>
  )
}

export default App;
```

# 3. key가 있을 경우와 없을 경우 React의 동작방식

### 3.1 키가 없을 때

만약 여기서 `<h2>안녕, 개리 2호</h2>` 를 제거한다면 리액트는 어떻게 컴포넌트를 바꿔줄까요?

```jsx
<h2>안녕, 개리 1호</h2>
<h2>안녕, 개리 2호</h2>
<h2>안녕, 개리 3호</h2>
<h2>안녕, 개리 4호</h2>
```

리액트는 개리 1호부터 4호까지의 트리 요소를 모두 비교한 후, 개리 2호, 개리 3호, 개리 4호 `h2`태그를 모두 변경하게 될 것입니다. 

```jsx
<h2>안녕, 개리 1호</h2>
<h2>안녕, 개리 3호</h2>
<h2>안녕, 개리 4호</h2>
```

'안녕, 개리 2호'를 지우고 '안녕, 개리 3호'를 만듭니다.

'안녕, 개리 3호'를 지우고 '안녕, 개리 4호'를 만듭니다.

'안녕, 개리 4호'를 지웁니다.

위 코드에서 변화된 것은 개리 2호가 제거된 것과 개리 3호, 4호의 위치입니다. 하지만 리액트가 느끼기에는 개리 2, 3, 4호가 모두 변경되었다고 생각합니다. 3, 4호가 존재하고 있는데 말이죠. 그래서 2, 3, 4호 h2 태그를 새롭게 그립니다.

### 3.2 키가 있을 때

```jsx
<h2 key="1">안녕, 개리 1호</h2>
<h2 key="2">안녕, 개리 2호</h2>
<h2 key="3">안녕, 개리 3호</h2>
<h2 key="4">안녕, 개리 4호</h2>
```

```jsx
<h2 key="1">안녕, 개리 1호</h2>
<h2 key="3">안녕, 개리 3호</h2>
<h2 key="4">안녕, 개리 4호</h2>
```

위와 같이 나열된 요소에서 key 속성을 넣어줬을 때, 리액트는 어떻게 컴포넌트를 바꿔줄까요? 리액트는 key를 통해 기존 트리 요소와 이후 트리 요소들이 일치하는지 확인합니다.

- key가 2인 요소가 존재하지 않으니, '안녕, 개리 2호'를 지웁니다.
- key가 3인 요소, key가 4인 요소는 존재하는데 위치만 다른 것을 알고, '안녕, 개리 3호', '안녕, 개리 4호'의 위치를 옮겨줍니다. 지우고 다시 생성하지 않고 말이죠.

# 4. 컴포넌트 리스트를 직접 만들어보기

아래처럼 직접 배열에 넣어도 됩니다. forEach를 사용해 push 후 변수로 넣어주어도 작동합니다.

```jsx
import './App.css';

function One(){
  return <p>one</p>
}

function Two(){
  return <p>two</p>
}

function Three(){
  return <p>three</p>
}

function App() {
  return (
    <div>
      {[
        <One/>,
        <Two/>,
        <Three/>,
        [
          <One/>,
          <Two/>,
          [
            <One/>,
            <Two/>,
          ]
        ]
      ]}
    </div>
  );
}

export default App;
```

# 5. 연습문제

1. 다음과 같은 data가 있다고 하였을 때 아래와 같이 화면을 만들어 주세요. 

여기에 더해 user의 이름을 클릭하면 email, job 정보를 표시해주세요.

```jsx
[
    { id: 1, name: 'Alice', email: 'alice@example.com', job: 'Engineer' },
    { id: 2, name: 'Bob', email: 'bob@example.com', job: 'Designer' },
    { id: 3, name: 'Charlie', email: 'charlie@example.com', job: 'Manager' }
]
```

![스크린샷 2023-09-11 오전 8.37.47.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-09-11_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_8.37.47.png)

1. 다음과 같은 data가 있다고 하였을 때 아래와 같이 화면을 만들어 주세요. 

여기에 더해 이름, 종, 나이를 입력하고 추가하기 버튼을 누르면 새로운 리스트 아이템을 생성하는 기능을 만들어주세요.

```jsx
[
    { name: "벨라", species: "고양이", age: "5", id: 111 },
    { name: "루시", species: "강아지", age: "3", id: 112 },
    { name: "데이지", species: "토끼", age: "2", id: 113 },
    { name: "몰리", species: "고양이", age: "1", id: 114 },
    { name: "매기", species: "강아지", age: "6", id: 115 }
  ]
```

![스크린샷 2023-09-11 오전 8.28.25.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-09-11_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_8.28.25.png)