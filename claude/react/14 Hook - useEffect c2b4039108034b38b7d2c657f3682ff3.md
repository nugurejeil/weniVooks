# 14. Hook - useEffect

## 1. ê°„ë‹¨í•œ ì¹´ìš´í„° ë§Œë“¤ê¸°

ì¹´ìš´í„°ë¥¼ ë§Œë“¤ì–´ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
import {useState} from 'react'

function Counter (){
  const [count, setCount] = useState(0)
  const handleCountUp = (e) => {
    setCount(count + 1)
  }
  
  return (
    <>
      <div>{count}</div>
      <button onClick={handleCountUp}>Up!</button>
    </>
  )
}

function App() {
  return (
    <div className="App">
      <Counter/>
    </div>
  );
}

export default App;
```

## 2. useEffect

countê°€ ì»´í¬ë„ŒíŠ¸ì˜ stateë¡œ ì¡´ì¬í•˜ëŠ”ë° ì´ stateê°€ ë³€í•  ë•Œë§ˆë‹¤ ë­”ê°€ ë‹¤ë¥¸ íš¨ê³¼ë¥¼ ì£¼ê³  ì‹¶ìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•˜ì—¬ countê°€ í™€ìˆ˜ì¸ì§€ ì§ìˆ˜ì¸ì§€ ë¹„êµí•´ì„œ alertì„ ë„ì›Œì£¼ë„ë¡ í•©ì‹œë‹¤.

```jsx
import React, { useState, useEffect } from 'react';//useEffectì¶”ê°€

function Counter() {
  const [count, setCount] = useState(0)
  const countUp =()=>{
    setCount(count+1)
  }
	//countê°€ ë³€í–ˆì„ë•Œ ë™ì‘í•  í–‰ë™ì„ useEffectë¥¼ ì´ìš©í•´ êµ¬í˜„
  useEffect(() => {
    if(count%2){
      alert("í™€ìˆ˜ì…ë‹ˆë‹¤")
    }else{
      alert("ì§ìˆ˜ì…ë‹ˆë‹¤")
    }
  }, [count])
  return(
    <>
    <div>{count}</div>
    <button onClick={countUp}>up!</button>
    </>
  )
}
function App() {
  return (
    <div>
      <Counter/>
    </div>
  );
}

export default App;
```

ìœ„ ì˜ˆì œì—ì„œëŠ” useEffectë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ useStateì™€ ë§ˆì°¬ê°€ì§€ë¡œ useEffectë¥¼ importí•©ë‹ˆë‹¤.  ì´ useEffectëŠ” stateë¥¼ ì§€ì •í•˜ì—¬ í•´ë‹¹ ìŠ¤í…Œì´íŠ¸ê°€ ë³€ê²½ë˜ì—ˆìŒì„ ê°ì§€í•˜ë©´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œì¼œì¤ë‹ˆë‹¤.

useEffectë¥¼ ì¡°ê¸ˆ ë” ì‚´í´ë´…ì‹œë‹¤. ê¸°ë³¸ì ì¸ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ê°™ìŠµë‹ˆë‹¤.

```jsx
useEffect(()=>{
	// stateê°€ ë³€ê²½ë˜ì–´ ë Œë”ë§ ë  ë•Œ ì‹¤í–‰í•˜ëŠ” ë¶€ë¶„!
	// ê³µë¶€í•˜ë ¤ê³  ì±… í´ëŠ” íƒ€ì´ë°!
	return()=>{
	// ë‹¤ì‹œ ë Œë”ë§ì„ í•˜ê¸° ì´ì „ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ìš°ê³  ë‹¤ì‹œ ê·¸ë¦¬ê² ì£ ?
	// ì´ ê³¼ì •ì—ì„œ ì§€ìš°ê¸° ì „ì— ì‹¤í–‰ë˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤! clean-upì´ë¼ê³ ë„ í•˜ì£ . 
	// ì—¬ëŸ¬ë¶„ë“¤ ì‹œí—˜ ê³µë¶€ í•˜ë‚˜ë¥¼ ë§ˆì¹˜ê³  ë‹¤ìŒ ì‹œí—˜ ê³µë¶€ ì „ì— ì±…ìƒ ì •ë¦¬í•˜ëŠ” ëŠë‚Œì´ë„ê¹Œìš”..
	// ê²°ë¡ ì ìœ¼ë¡œ í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì§€ì›Œì§ˆ ë•Œ, ê·¸ë¦¬ê³  ìµœì´ˆê°€ ì•„ë‹Œ effect í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸° ì§ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤.
	}
},[/*ê°ì‹œí•  stateê°’ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.(ë“¤ì–´ê°€ì§€ ì•Šìœ¼ë©´ ìµœì´ˆ 1ë²ˆë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.*/)]) 
```

- useEffectì˜ í˜•íƒœ
    
    ```jsx
    // ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ì‹¤í–‰
    useEffect(()=>{
    	console.log('hello world');
    })
    
    // ì²˜ìŒì—ë§Œ ì‹¤í–‰
    useEffect(()=>{
    	console.log('hello world');
    }, [])
    
    // ë³€ìˆ˜ë“¤ì˜ ë³€í™”ê°€ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ ì‹¤í–‰
    useEffect(()=>{
    	console.log('hello world');
    }, [ë³€ìˆ˜1, ë³€ìˆ˜2...])
    ```
    

# 3. Quiz!

<aside>
ğŸ’¡ í€´ì¦ˆë¥¼ í‘¸ì‹¤ ë•Œ ìµœì´ˆë¡œ ë Œë”ë§ ë  ë•Œ, ìƒíƒœê°€ ì—…ë°ì´íŠ¸ ëì„ ë•Œ, ì—…ë°ì´íŠ¸ê°€ ëœ ë‚´ìš©ì„ ë Œë”ë§ í•  ë•Œ logë¥¼ ì°ë„ë¡ í•´ë³´ì„¸ìš”! ì˜ ì•ˆë˜ê³  ìˆë‹¤ë©´ ë¬´í•œ ë°˜ë³µì´ ì¼ì–´ë‚˜ê³  ìˆì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

</aside>

### 3.1 ì‹¤ì œ ì ìš©í•´ë³´ê¸°(`useEffect`) â‘ 

ì‹¤ìŠµ 1: useEffectì— ì‘ì„±í•œ ì•Œë¦¼ì´ í˜ì´ì§€ ë“¤ì–´ê°€ìë§ˆì ë‚˜ì™€ ë¶ˆí¸í•©ë‹ˆë‹¤. 

(Hint :  useEffectë¥¼ ìˆ˜ì •í•´ ë³´ì„¸ìš”. useStateë¥¼ í™œìš©í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.)

- ì •ë‹µ
    
    ì²˜ìŒ ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ê³ ë‚œ ì´í›„ì—ë§Œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ checkí•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ë§Œë“¤ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.
    
    ```jsx
    import React, { useState, useEffect } from 'react';
    
    function Counter() {
      const [count, setCount] = useState(0)
      const [checkRender, setCheckRender] = useState(false);
      const countUp =()=>{
        
        setCount(count+1)
        
      }
      useEffect(() => {
        if (checkRender) {
          if(count%2){
            alert("í™€ìˆ˜ì…ë‹ˆë‹¤")
          }else{
            alert("ì§ìˆ˜ì…ë‹ˆë‹¤")
          }
        }
        setCheckRender(true);
      }, [count])
      return(
        <>
        <div>{count}</div>
        <button onClick={countUp}>up!</button>
        </>
      )
    }
    function App() {
      return (
        <div>
          <Counter/>
        </div>
      );
    }
    
    export default App;
    ```
    
    ```jsx
    import React, { useState, useEffect } from 'react';
    
    function Counter() {
      const [count, setCount] = useState(0)
    
      const countUp = () => {
        setCount(count+1)
      }
    
      useEffect(() => {
        if( count !== 0){
          if(count % 2) {
            alert("í™€ìˆ˜ì…ë‹ˆë‹¤")
          } else {
            alert("ì§ìˆ˜ì…ë‹ˆë‹¤")
          }
        }
      }, [count])
    
      return(
        <>
        <div>{count}</div>
        <button onClick={countUp}>up!</button>
        </>
      )
    }
    
    function App() {
      return (
        <div>
          <Counter/>
        </div>
      );
    }
    
    export default App;
    ```
    

### 3.2 ì‹¤ì œ ì ìš©í•´ë³´ê¸°(`useEffect`, `cleanup`) â‘¡

![Untitled](Untitled%2035.png)

ì‹¤ìŠµ 2: Date ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ„ì™€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ ì¶”ê°€í•˜ê³ , ì‹œê°„ì„ ìƒˆë¡œê³ ì¹¨í•˜ì§€ ì•Šì•„ë„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€Œê²Œ í•´ë³´ì„¸ìš” :)

```jsx
import React, { useState, useEffect } from 'react';

function Time(props) {
  const [today, setToday] = useState(new Date());
  const hour = today.getHours();
  const min = today.getMinutes();
  const sec = today.getSeconds();
  console.log("ë Œë”ë§ì´ ë©ë‹ˆë‹¤..?")//ë Œë”ë§ì´ ì˜ ë˜ëŠ”ì§€ í™•ì¸ìš©! ê¼­ ë„£ê³  ì§„í–‰í•´ì£¼ì„¸ìš”.

  return (
    <div>
      <h1>
        ì‹œê°„ : {hour}ì‹œ {min}ë¶„ {sec}ì´ˆ
      </h1>
    </div>
  );
}

function App() {
  return (
    <div>
      <Time/>
    </div>
  );
}

export default App;
```

- ì •ë‹µ
    
    ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì…¨ë‹¤ë©´  Timeì»´í¬ë„ŒíŠ¸ì—ì„œ ë¡œê·¸ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.
    ì •ë§ ë§ì€ íšŸìˆ˜ì˜ ë¡œê·¸ë¥¼ ë³´ì‹¤ ìˆ˜ ìˆì„ê²ƒì…ë‹ˆë‹¤. 
    ë§ˆì°¬ê°€ì§€, useEffectë¥¼ ì´ìš©í–ˆë‹¤ í•´ë„ ë§Œì•½ cleanupì„ ì´ìš©í•˜ì§€ ì•Šì•˜ë‹¤ë©´, 
    ë§ˆì°¬ê°€ì§€ë¡œ ë¬´ìˆ˜í•œ ë Œë”ë§ì´ ì¼ì–´ë‚˜ê³  ìˆìŒì„ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    ```jsx
    import React, { useState, useEffect } from 'react';
    
    function Time(props) {
      const [today, setToday] = useState(new Date());
      const hour = today.getHours();
      const min = today.getMinutes();
      const sec = today.getSeconds();
    
    	console.log("ë Œë”ë§ì´ ë©ë‹ˆë‹¤..?");
    	
    	setInterval(() => {
    	  const t = new Date();
        setToday(t);
      }, 1000);
    
      return (
        <div>
          <h1>
            ì‹œê°„ : {hour}ì‹œ {min}ë¶„ {sec}ì´ˆ
          </h1>
        </div>
      );
    }
    
    function App() {
      return (
        <div>
          <Time/>
        </div>
      );
    }
    
    export default App;
    ```
    
    setInterval ì„ í•œë²ˆ ì‘ë™ì‹œí‚¤ë©´ ì •ì§€ì‹œí‚¤ê¸° ì „ê¹Œì§€ ì‘ë™ì„ ë©ˆì¶”ì§€ ì•ŠìŠµë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ëœë”ë§ ë˜ë©´ ì´ì „ì— ì‘ë™í•˜ë˜ setIntervalì´ ì¤‘ì§€ë ê¹Œìš”? ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤.
    
    ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ëœë”ë§ ë˜ë©´, ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ì•ˆì— ì¡´ì¬í•˜ëŠ” setInterval í•¨ìˆ˜ê°€ ë˜ ì‹¤í–‰ë©ë‹ˆë‹¤.
    ê¸°ì¡´ì— ì‘ë™í•˜ë˜ setIntervalì€ ê·¸ëŒ€ë¡œ ë‘ê³  ìƒˆë¡œìš´ setInterval í•¨ìˆ˜ê°€ ë™ì‘ì„ ì‹œì‘í•˜ëŠ”ê±°ì£ !
    
    ì¦‰, ì•„ë˜ ì½”ë“œê°€ ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ ë  ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ ì‹¤í–‰ëœë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.
    
    ```jsx
    // ì„±ëŠ¥ì´ìŠˆê°€ ë°œìƒë˜ëŠ” ê³µê°„
    setInterval(() => {
      const t = new Date();
      setToday(t);
    }, 1000);
    ```
    
    ê·¸ëŸ¬ë‹ˆ ìš°ë¦¬ëŠ” ê¸°ì¡´ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§€ê¸° ì§ì „ì— ë°˜ë³µí•´ì£¼ëŠ” ë™ì‘ì„ ì‚­ì œí•´ì£¼ëŠ” ì¼ì„ í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.
    
    ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” cleanupì´ë€ ê²ƒì„ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤!
    
    ì•„ë˜ì™€ ê°™ì´ í•˜ë©´ ë©ë‹ˆë‹¤!
    
    ```jsx
    
    import React, { useState, useEffect } from 'react';
    
    function Time(props) {
      const [today, setToday] = useState(new Date());
      const hour = today.getHours();
      const min = today.getMinutes();
      const sec = today.getSeconds();
    
      console.log("ë Œë”ë§ì´ ë©ë‹ˆë‹¤..?");
    
      useEffect(() => {
        const intervalId = setInterval(() => {
          const t = new Date();
          setToday(t);
        }, 1000);
        return () => {
        // clearInterval : setInterval í•¨ìˆ˜ì˜ ì‘ë™ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.
          clearInterval(intervalId);
        }
      }, [today]);
    
      return (
        <div>
          <h1>
            ì‹œê°„ : {hour}ì‹œ {min}ë¶„ {sec}ì´ˆ
          </h1>
        </div>
      );
    }
    
    function App() {
      return (
        <div>
          <Time />
        </div>
      );
    }
    
    export default App;
    ```
    

ì‹¤ìŠµ3 : ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ UIë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš”. ìŠ¤íƒ€ì¼ë„ ê°™ì´ ì§„í–‰í•´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

```jsx
[
        {
            "title": "France",
            "population": "200",
            "id": "1",
            "loc": "europe"
        },
        {
            "title": "Italy",
            "population": "300",
            "id": "2",
            "loc": "europe"
        },
        {
            "title": "England",
            "population": "400",
            "id": "3",
            "loc": "europe"
        },
        {
            "title": "America",
            "population": "500",
            "id": "4",
            "loc": "north-america"
        },
        {
            "title": "Korea",
            "population": "600",
            "id": "5",
            "loc": "asia"
        }
    ]
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-08-26 á„‹á…©á„Œá…¥á†« 5.33.23.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-08-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_5.33.23.png)