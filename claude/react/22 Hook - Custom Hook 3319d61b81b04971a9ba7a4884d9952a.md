# 22. Hook - Custom Hook

# 1. Custom hook?

`useState`, `useEffect` 등 Hook을 사용하여 상태 관리를 하고 있습니다. 하지만 우리의 코드에서는 **반복되는 로직들을** 많이 발견할 수 있죠. JS에서는 중복된 로직을 함수라는 개념으로 뽑아냈는데요. 

리액트에서도 그렇게 하고싶은게 당연합니다. 이와 같이 중복되는 Hook을 우리 마음대로 만들어 **분리하고 재사용하는** 법을 알아보겠습니다.

# 2. Custom Hook 사용하기

아래와 같은 컴포넌트 2개가 있다고 가정하겠습니다.

```jsx
import React, { useState } from 'react';

function InputComponent() {
    const [value, setValue] = useState('');
    function onChange(e) {
        setValue(e.target.value);
    }
    return (
        <>
            <input type="text" onChange={onChange}/>
            <div>
                {value}
            </div>
        </>
    )
}

export default InputComponent;
```

```jsx
import React, { useState } from 'react';

function SomethingComponent() {
    const [value, setValue] = useState('');
    function onChange(e) {
        setValue(e.target.value);
    }
    return (
        <>
            <input type="text" onChange={onChange}/>
            <div>
                {value}가 강해졌다 돌격해!
            </div>
        </>
    )
}

export default SomethingComponent;
```

입력창에서 입력한 값을 통해 상태를 변경하도록 도와주는 `onChange` 부분을 살펴봅시다.

`SomethingComponent`와 `InputComponent`에서 똑같은 로직을 사용하고 있습니다. 이런 경우에 사용할 수 있습니다.

Hook 폴더를 만든 후 `useInput.js` 파일을 만들어 주세요. 훅의 이름은 항상 **“useName”**과 같은 형식으로 작성합니다. 

![파일 구조](Untitled%2053.png)

파일 구조

아래와 같이 작성해줍니다. 코드를 보면 이전에 각 컴포넌트에서 중복되어 있는 로직과 동일한 부분이 그대로 작성되어 있는 것을 확인할 수 있습니다. 그리고 리턴으로 `value`와 상태를 조작해주는 `onChange` 함수를 넘겨줍니다.

```jsx
import { useState } from 'react';

function useInput(initState) {
    const [value, setValue] = useState(initState);
    function onChange(e) {
        setValue(e.target.value);
    }
    return [value, onChange];
}

export default useInput;
```

`useInput.jsx`를 만들었다면 이제는 컴포넌트로 돌아와서 아래와 같이 수정해주도록 하겠습니다. 훨씬 깔끔해진 모습을 보실 수 있습니다.

```jsx
import React from 'react';
import useInput from '../Hook/useInput';

function InputComponent() {
    const [value, onChange] = useInput("");
    return (
        <>
            <input type="text" onChange={onChange}/>
            <div>
                {value}
            </div>
        </>
    )
}
export default InputComponent;
```

```jsx
import React from 'react';
import useInput from '../Hook/useInput';

function SomethingComponent() {
    const [value, onChange] = useInput("");
    return (
        <>
	        <input type="text" onChange={onChange}/>
	        <div>
		        {value}가 강해졌다 돌격해!
	        </div>
        </>
    )
}
export default SomethingComponent;
```

- App.js에 모아서 볼 수 있는 예제
    
    ```jsx
    import React, { useState } from 'react';
    
    function useInput() {
      const [value, setValue] = useState('');
      function onChange(e) {
          setValue(e.target.value);
      }
      return [value, onChange];
    }
    
    function InputComponent() {
      const [value, onChange] = useInput('');
      return (
          <>
            <input type="text" onChange={onChange}/>
            <div>
              {value}
            </div>
          </>
      )
    }
    
    function SomethingComponent() {
      const [value, onChange] = useInput('');
      return (
          <>
            <input type="text" onChange={onChange}/>
            <div>
              {value}가 강해졌다 돌격해!
            </div>
          </>
      )
    }
    function App(){
      return(
        <>
          <InputComponent/>
          <SomethingComponent/>
        </>
      )
    }
    export default App;
    ```