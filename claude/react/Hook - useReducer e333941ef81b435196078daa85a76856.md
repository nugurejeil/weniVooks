# Hook - useReducer

ìƒíƒœë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” `useState`ë¥¼ ì‚¬ìš©í•˜ê³ , ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ `setState`ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. `useReducer`ëŠ” ë³µì¡í•œ ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì˜ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì¤ë‹ˆë‹¤. 

# 1. ì˜ˆì œë¡œ ê°œë…ìµíˆê¸°

ì˜ˆì œë¥¼ ë³´ë©° ìµí˜€ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!

<aside>
ğŸ’¡ ë‚´ìš©ì„ ì´í•´í•˜ì‹œê³  ì‘ì„±ëœ ì½”ë“œë¥¼ ìˆœì„œì— ë§ì¶° ìˆ˜ì •í•˜ë©° ì‹¤í–‰í•´ ë³´ì„¸ìš”!

</aside>

## 1.1 useStateë¡œ ë§Œë“  ìƒíƒœ ê´€ë¦¬ê°€ ë“¤ì–´ìˆëŠ” ì»´í¬ë„ŒíŠ¸

ì•„ë˜ëŠ” `useState`ë¥¼ ì´ìš©í•˜ì—¬ ìºë¦­í„°ì˜ ì •ë³´ë¥¼ ë§Œë“œëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.

```jsx
import {useState} from 'react';

function CharacterSettingForm() {
  const [status, setStatus] = useState({
    name:"í™ê¸¸ë™",
    age:0
  });
  const onIncrementAge = () => {
    setStatus((prevStatus)=>{
      const newStatus = {
        ...prevStatus, 
        age:prevStatus.age+1
      }
      return newStatus
    }
    )
  }
  const onDecrementAge = () => {
    setStatus((prevStatus)=>{
      const newStatus = {
        ...prevStatus, 
        age:prevStatus.age-1
      }
      return newStatus
    }
    )
  }
  const onResetAge = () =>{
    setStatus((prevStatus)=>{
      const newStatus = {
        ...prevStatus, 
        age:0
      }
      return newStatus
    }
    )
  }
  const onChangeName = (newName) =>{
    setStatus((prevStatus)=>{
      const newStatus = {
        ...prevStatus, 
        name:newName
      }
      return newStatus
    }
    )

  }
  const refNameInput= useRef()
  return (
    <div>

      ë‚˜ì´: {status.age}
      <br/>
      <button onClick={onIncrementAge}>ì¦ê°€</button>
      <button onClick={onResetAge}>Reset</button>
      <button onClick={onDecrementAge}>ê°ì†Œ</button>
      <br/>
      ì´ë¦„ : {status.name}
      <br/>
      <input ref={refNameInput} placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></input>
      <button onClick={()=>onChangeName(refNameInput.current.value)}>í™•ì¸</button>
    </div>
  );
}
const App = () => {
    return (
      <CharacterSettingForm/>
    );
};

export default App;
```

## 1.2 ë¶ˆí¸í•œ ì 

ìºë¦­í„°ì˜ ì •ë³´ë¥¼ ê°ì²´ í˜•íƒœë¡œ ê´€ë¦¬í•œ ì¼€ì´ìŠ¤ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ìƒíƒœì— ëŒ€í•˜ì—¬ ë³µì¡í•˜ê±°ë‚˜ ì—¬ëŸ¬ê°€ì§€ ë¡œì§ë“¤ì´ í•„ìš”í•œ ê²½ìš°ë“¤ì´ ìˆëŠ”ë° ì´ëŸ¬í•œ ê²½ìš° ë„ˆë¬´ ë³µì¡í•´ì§€ê³  ì½”ë“œë„ ê¸¸ì–´ì ¸ì„œ ì½ê³  í•´ì„í•˜ëŠ”ë° ë¶ˆí¸í•¨ì´ ìˆìŠµë‹ˆë‹¤.

ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ì´ëŸ¬í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ë¡œì§ì„ ë¶„ë¦¬í•˜ëŠ”ë° ë„ì›€ì„ ì£¼ëŠ” `useReducer`ë¼ëŠ” ê¸°ëŠ¥ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

## 1.3 useReducerë¡œ ìƒíƒœ ê´€ë¦¬ ë¡œì§ì„ ë¶„ë¦¬í•œ ì»´í¬ë„ŒíŠ¸

ì•„ì§ì€ ì‹¤í–‰ë˜ì§€ ì•Šì§€ë§Œ ì–´ë–¤ì‹ìœ¼ë¡œ ë‚´ ì»´í¬ë„ŒíŠ¸ì˜ ì½”ë“œê°€ ì–´ë–»ê²Œ ì™„ì„±ë˜ëŠ”ì§€ ë¨¼ì € ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
function CharacterSettingForm() {
  const [status, dispatch] = useReducer(reducer, {name:"í™ê¸¸ë™",age:0})
  const refNameInput= useRef()
  const onIncrementAge = () => {
    const action = {type:"incrementAge"}
    dispatch(action)
  }
  const onDecrementAge = () => {
    const action = {type:"decrementAge"}
    dispatch(action)
  }
  const onResetAge = () =>{
    const action = {type:"resetAge"}
    dispatch(action)
  }
  const onChangeName = (newName) =>{
    const action = {type:"changeName",name:newName}
    dispatch(action)
  }
  return (
    <div>

      ë‚˜ì´: {status.age}
      <br/>
      <button onClick={onIncrementAge}>ì¦ê°€</button>
      <button onClick={onResetAge}>Reset</button>
      <button onClick={onDecrementAge}>ê°ì†Œ</button>
      <br/>
      ì´ë¦„ : {status.name}
      <br/>
      <input ref={refNameInput} placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></input>
      <button onClick={()=>onChangeName(refNameInput.current.value)}>í™•ì¸</button>
    </div>
  );
}
```

ì´ì „ ì½”ë“œì™€ ë‹¤ë¥´ê²Œ í›¨ì”¬ ì§§ì•„ì§€ê³  í•œ ëˆˆì— ë“¤ì–´ì˜¤ëŠ” í˜•íƒœë¡œ ë°”ë€Œì—ˆë„¤ìš”. useState ëŒ€ì‹ ì— ì´ëŸ¬í•œ ë¶€ë¶„ì´ ìƒê²¼ìŠµë‹ˆë‹¤.

`const [status,dispatch] = useReducer(reducer,{name:"í™ê¸¸ë™",age:0})`  

ê·¸ë¦¬ê³  ì¸ìë¡œ reducerì™€ useStateë¥¼ ì‚¬ìš©í•  ë•Œ ë„£ì—ˆë˜ ì´ˆê¸°ê°’ì„ ë„£ì–´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ í•¨ìˆ˜ ë‚´ë¶€ëŠ” `dispatch`ë¼ëŠ” í•¨ìˆ˜ì— `action`ì´ë¼ëŠ” ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ëŠ” í˜•íƒœë¡œ ë°”ë€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 1.3.1 reducerë§Œë“¤ê¸°

ì´ì œ ìœ„ ì½”ë“œë¥¼ ë™ì‘ì„ í•˜ë„ë¡ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € ìœ„ ì½”ë“œë¥¼ ë™ì‘í•˜ê²Œ í•˜ê¸° ìœ„í•´ `reducer`ë¥¼ ë§Œë“¤ì–´ ì£¼ë„ë¡í•˜ê² ìŠµë‹ˆë‹¤.

```jsx
function reducer(state,action) {
  switch (action.type) {
    case 'incrementAge':
      return {
        ...state,
        age: state.age+1
      }
    case 'decrementAge':
      return {
        ...state,
        age: state.age-1
      }
    case 'resetAge':
      return {
        ...state,
        age: 0
      }
    case 'changeName':
      const newState = {
        ...state,
        name: action.name
      }
      return newState
    default:
      return state;
  }
}
```

`reducer`ì—ì„œëŠ” `action`ê³¼ `state`ë¥¼ ë„˜ê²¨ë°›ê²Œ ë©ë‹ˆë‹¤. `state`ë¡œëŠ” ì´ì „ `state`ê°€ ë“¤ì–´ì˜¤ê²Œ ë©ë‹ˆë‹¤.

`action`ìœ¼ë¡œëŠ” ì•ì„œ ì‚´í´ë³¸ `dispath`ì—ì„œ ì…ë ¥í–ˆë˜ `action`ê°ì²´ê°€ ë„˜ì–´ì˜¤ê²Œ ë©ë‹ˆë‹¤. ì´ë•Œ ì„¤ì •í•œ `action`ì˜ type, ì¦‰ `action.type`ì— ë”°ë¼ ì„¤ì •í•œ ë¡œì§ì´ ë™ì‘í•˜ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. 

ë˜í•œ ì¶”ê°€ì ìœ¼ë¡œ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ”ë° ê°’ì´ í•„ìš”í•˜ë‹¤ë©´ action ê°ì²´ì— ì¶”ê°€ì ìœ¼ë¡œ ê°’ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. ì´ë¦„ì„ ë°”ê¾¸ê¸° ìœ„í•´ `action.name` ì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë‹ˆ `action`ì„ ì…ë ¥í•  ë•Œ `{type:'changeName', name:newName}` ì™€ ê°™ì€ í˜•íƒœë¡œ ì‘ì„±ì„ í•´ì„œ ë„˜ê²¨ì£¼ë©´ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë§Œë“  `reducer`ë¥¼ `useReducer`ë¡œ ë„˜ê²¨ì£¼ë©° ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

### 1.3.2 ì™„ì„±ì½”ë“œ

```jsx
import {useReducer, useRef} from 'react'

function reducer(state,action) {
  switch (action.type) {
    case 'incrementAge':
      return {
        ...state,
        age: state.age+1
      }
    case 'decrementAge':
      return {
        ...state,
        age: state.age-1
      }
    case 'resetAge':
      return {
        ...state,
        age: 0
      }
    case 'changeName':
      const newState = {
        ...state,
        name: action.name
      }
      return newState
    default:
      return state;
  }
}

function CharacterSettingForm() {
  const [status,dispatch] = useReducer(reducer,{name:"í™ê¸¸ë™",age:0})
  const refNameInput= useRef()
  const onIncrementAge = () => {
    const action = {type:"incrementAge"}
    dispatch(action)
  }
  const onDecrementAge = () => {
    const action = {type:"decrementAge"}
    dispatch(action)
  }
  const onResetAge = () =>{
    const action = {type:"resetAge"}
    dispatch(action)
  }
  const onChangeName = (newName) =>{
    const action = {type:"changeName",name:newName}
    dispatch(action)
  }
  return (
    <div>

      ë‚˜ì´: {status.age}
      <br/>
      <button onClick={onIncrementAge}>ì¦ê°€</button>
      <button onClick={onResetAge}>Reset</button>
      <button onClick={onDecrementAge}>ê°ì†Œ</button>
      <br/>
      ì´ë¦„ : {status.name}
      <br/>
      <input ref={refNameInput} placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></input>
      <button onClick={()=>onChangeName(refNameInput.current.value)}>í™•ì¸</button>
    </div>
  );
}

const App = () => {
    return (
      <CharacterSettingForm/>
    );
};

export default App;
```

`reducer`ì— ìƒíƒœ ê´€ë¦¬ì— í•„ìš”í•œ ë¡œì§ì„ `action`ë³„ë¡œ ì‘ì„±í•˜ê³ , `action`ì—ëŠ” ìƒíƒœ ê´€ë¦¬ì— í•„ìš”í•œ ì •ë³´ë¥¼ ë‹´ê³ , `dispatch`ë¥¼ í†µí•´ `action`ì„ ë°›ì•„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì„ í†µí•´ ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ìˆìŠµë‹ˆë‹¤.

1. `reducer` : ìƒíƒœ ì—…ë°ì´íŠ¸ì— í•„ìš”í•œ ë¡œì§
2. `action` : ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•œ ì •ë³´
3. `dispatch` : actionì„ ë°›ì•„ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì‹¤í–‰

### 1.3.3 íŒŒì¼ì„ ë¶„ë¦¬í•´ì„œ ë” ê¹”ë”í•˜ê²Œ í•˜ê¸°

ë§Œì•½ reducer.js íŒŒì¼ì„ ë¶„ë¦¬í•˜ê²Œ ëœë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ê¹”ë”í•´ì§‘ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œëŠ” src í´ë”ì— reducersë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³  reducer.jsíŒŒì¼ì„ ë§Œë“¤ì–´ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤.

```jsx
import {useReducer, useRef} from 'react'
import reducer from './reducers/reducer'

function CharacterSettingForm() {
  const [status,dispatch] = useReducer(reducer,{name:"í™ê¸¸ë™",age:0})
  const refNameInput= useRef()
  const onIncrementAge = () => {
    const action = {type:"incrementAge"}
    dispatch(action)
  }
  const onDecrementAge = () => {
    const action = {type:"decrementAge"}
    dispatch(action)
  }
  const onResetAge = () =>{
    const action = {type:"resetAge"}
    dispatch(action)
  }
  const onChangeName = (newName) =>{
    const action = {type:"changeName",name:newName}
    dispatch(action)
  }
  return (
    <div>

      ë‚˜ì´: {status.age}
      <br/>
      <button onClick={onIncrementAge}>ì¦ê°€</button>
      <button onClick={onResetAge}>Reset</button>
      <button onClick={onDecrementAge}>ê°ì†Œ</button>
      <br/>
      ì´ë¦„ : {status.name}
      <br/>
      <input ref={refNameInput} placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></input>
      <button onClick={()=>onChangeName(refNameInput.current.value)}>í™•ì¸</button>
    </div>
  );
}

const App = () => {
    return (
      <CharacterSettingForm/>
    );
};

export default App;
```

```jsx
export default function reducer(state,action) {
    switch (action.type) {
      case 'incrementAge':
        return {
          ...state,
          age: state.age+1
        }
      case 'decrementAge':
        return {
          ...state,
          age: state.age-1
        }
      case 'resetAge':
        return {
          ...state,
          age: 0
        }
      case 'changeName':
        const newState = {
          ...state,
          name: action.name
        }
        return newState
      default:
        return state;
    }
  }
```

íŒŒì¼ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬ë¥¼ í•˜ë©´ ë¡œì§ ë¶„ë¦¬ë¥¼ í†µí•´ ì½”ë“œê°€ ë” ê¹”ë”í•´ì§€ëŠ” ê²ƒë¿ë§Œ ì•„ë‹ˆë¼ ë¡œì§ ìˆ˜ì •ë§Œ í•˜ê³ ì‹¶ì„ ë•Œ reducer.js íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ë˜ë‹ˆ ë” í¸í•˜ê²Œ ìœ ì§€ë³´ìˆ˜ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.