# 12. 합성 컴포넌트

이번 시간에는 컴포넌트를 합성해 봅시다. 일반적인 컴포넌트를 하나 만들고 그 안에 세부 기능을 가지는 컴포넌트를 합성해서 사용할 수 있습니다. 컴포넌트를 합성함으로써 컴포넌트의 재사용성을 높일 수 있습니다.

일반적인 의미의 컴포넌트 합성은 작은 컴포넌트와 작은 컴포넌트를 결합하여 더 큰 컴포넌트를 만드는것이라 정의할 수 있습니다. 이렇게 합성 컴포넌트를 사용하면, 여러 컴포넌트에서 재사용 가능한 작은 컴포넌트를 만들 수 있으며, 컴포넌트의 구조가 단순해져서 가독성과 유지보수성이 높아집니다.

아래 예시로 살펴보겠습니다.

```jsx
import React from 'react';

function Button(props) {
  const { text, onClick } = props;
  return (
    <button onClick={onClick}>{text}</button>
  );
}

function Modal(props) {
  const { title, content, onClose } = props;
  return (
    <div>
      <h2>{title}</h2>
      <p>{content}</p>
      <Button text="Close" onClick={onClose} />
    </div>
  );
}

export default Modal;
```

```jsx
import React, { useState } from 'react';
import Modal from './Modal';

function App() {
  const [isModalOpen, setIsModalOpen] = useState(false);

  function handleOpenModal() {
    setIsModalOpen(true);
  }

  function handleCloseModal() {
    setIsModalOpen(false);
  }

  return (
    <div>
      <h1>Welcome to my app!</h1>
      <button onClick={handleOpenModal}>Open modal</button>
      {isModalOpen && (
        <Modal
          title="My modal"
          content="This is my modal."
          onClose={handleCloseModal}
        />
      )}
    </div>
  );
}

export default App;
```

위에서 작성한 **`Modal`** 컴포넌트를 다른 컴포넌트에서 사용할 수 있습니다. 위에서는 **`App`** 컴포넌트에서 **`Modal`** 컴포넌트를 사용하여 모달을 렌더링할 수 있습니다.

좀 더 다양한 기능을 활용하는 예시를 살펴보겠습니다.

 아래 사진은 기능이 다른 두 개의 모달입니다.

![Untitled](Untitled%2028.png)

![Untitled](Untitled%2029.png)

두 개의 모달 창을 만들 경우 두 개의 컴포넌트를 만들 수 있습니다. 이때 합성 컴포넌트를 사용하지 않는다면 비슷한 컴포넌트를 2개 만들어야 합니다. 그러면 코드가 중복되고 재사용을 할 수 있는 부분을 재사용하지 못하게 됩니다.

하지만 일반적인 컴포넌트를 만들어서 컴포넌트를 합성해서 사용한다면, 비슷한 일반적인 컴포넌트를 재사용하여 모달이 필요한 곳에 가서 합성하여 사용할 수 있습니다.

## 합성 컴포넌트 적용해보기

이번에는 `create-react-app`을 통해 새로운 프로젝트를 만들어 진행하겠습니다. `styled-components`를 사용하기 때문에 `npm install styled-components`를 설치합니다. 앞 시간에 설치를 하였으나 혹시 설치를 안하셨다면 이번 챕터에서 설치를 해주시기 바랍니다.

### 1. 기존 코드

두 개의 모달창을 만들어봅시다

![위니브 - 모달 창 2개](Untitled%2030.png)

위니브 - 모달 창 2개

```jsx
import styled from "styled-components";

const CardDiv = styled.div`
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #c4c4c4;
  margin-bottom: 20px;
  width: 200px;
`;

const CardOne = (props) => {
  return (
    <>
      <CardDiv>
        <h3>챌린지 설정</h3>
        <hr />
        <button>초기화</button>
        <button>저장하기</button>
      </CardDiv>
    </>
  );
};

const CardDivTwo = styled.div`
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #c4c4c4;
  margin-bottom: 20px;
  width: 400px;
`;

const CardTwo = (props) => {
  return (
    <>
      <CardDivTwo>
        <h3>서비스 공유하기</h3>
        <hr />
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque ut
          eveniet, laudantium, deleniti autem sequi molestias magni quia,
          aliquam et praesentium nostrum dolores culpa cupiditate unde
          doloremque labore beatae accusamus.
        </p>
        <div>
          <button>이미지 저장</button>
          <button>트위터</button>
          <button>페이스북</button>
        </div>
      </CardDivTwo>
    </>
  );
};

function App() {
  return (
    <>
      <CardOne/>
      <CardTwo/>
    </>
  );
}

export default App;
```

위에서 작성한 코드를 보면 겹치는 코드를 확인할 수 있습니다. 

### 2. 합성 컴포넌트 - 재사용되는 부분 확인하기

```jsx
// 1.style - width를 제외하고 코드 동일 
const CardDiv = styled.div`
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #c4c4c4;
  margin-bottom: 20px;
  width: 400px; 
`;

// 2. tag 동일
<CardDiv>
  <h3></h3>
  <hr />
</CardDiv>
```

해당부분에서  감싸는 태그가 비슷한 경우 [위에서 설명한 것처럼](12%20%E1%84%92%E1%85%A1%E1%86%B8%E1%84%89%E1%85%A5%E1%86%BC%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3%20b6f650f211054d6db85a2ce4886d89fe.md) 공통된 부분을 새로운 컴포넌트로 만들고 이 컴포넌트가 필요한 컴포넌트로 가져와서 사용하고 싶습니다. 모달을 하나 만들때마다 동일한 코드를 계속 작성하는 것이 아니라 겹치는 부분을 컴포넌트로 만들어서 재사용하는 것이죠.

합성 컴포넌트를 사용해서 작성해 볼까요?

```jsx
import styled from "styled-components";

const CardDiv = styled.div`
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #c4c4c4;
  margin-bottom: 20px;
  width: ${(props) => (props.className === "setting" ? "200px" : "400px")};
`;

const Card = (props) => {
  return (
    <CardDiv className={props.className}>
      <h3>{props.value}</h3>
      <hr />
    </CardDiv>
  );
};

function App() {
  return (
    <>
      <Card className="setting" value="챌린지 설정">
      </Card>
      <Card className="share" value="서비스 공유하기">
      </Card>
    </>
  );
}

export default App;
```

먼저 `<Card>` 컴포넌트를 하나 만들어 주었습니다. Card 컴포넌트에 value props를 사용해서 h3 태그에 들어갈 텍스트를 설정해줍니다. 

className props로 넘겨준 값으로는 `styled-component`의 props 조건문을 통해 className props의 값에 따라 width가 달라지게 합니다.

![Untitled](Untitled%2031.png)

### 3. 합성컴포넌트 - 재사용해보기

다음은 `<hr>` 아래에 들어갈 내용들을 컴포넌트로 만들어 봅시다. 챌린지 설정하기 카드 부분에서는 아래와 같은 부분들이 들어가겠죠?

![Untitled](Untitled%2032.png)

```jsx
const SettingCard = () => {
  return (
    <>
      <button>초기화</button>
      <button>저장하기</button>
    </>
  );
};

```

그리고 서비스 공유하기에 들어갈 내용입니다.

![Untitled](Untitled%2033.png)

```jsx
const ShareCard = () => {
  return (
    <>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque ut
        eveniet, laudantium, deleniti autem sequi molestias magni quia, aliquam
        et praesentium nostrum dolores culpa cupiditate unde doloremque labore
        beatae accusamus.
      </p>
      <div>
        <button>이미지 저장</button>
        <button>트위터</button>
        <button>페이스북</button>
      </div>
    </>
  );
};

```

이제 `ShareCard`, `SettingCard`, `Card` 컴포넌트를 합쳐줍니다. 어떻게 하면될까요? `props.children`이라는 속성을 통해 자식으로 사용되는 부분이 어디에 표현되야할지 입력할 수 있습니다.

`<hr />` 아래에 `<div>{props.children}</div>` 해당 코드를 넣어보도록 하겠습니다.

```jsx
const CardDiv = styled.div`
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #c4c4c4;
  margin-bottom: 20px;
  width: ${(props) => (props.className === "setting" ? "200px" : "400px")};
`;

const Card = (props) => {
  return (
    <CardDiv className={props.className}>
      <h3>{props.value}</h3>
      <hr />
      <div>{props.children}</div>
    </CardDiv>
  );
};

```

위와 같이 작성하게 되면 컴포넌트 사이에 들어가는 자식요소를 `props.children` 받아오게 됩니다. 아래와 같은 방식으로 사용할 수 있게 됩니다.

```jsx
//최종 App컴포넌트의 모습
const App = () => {
  return (
    <>
      <Card className="setting" value="챌린지 설정">
        <SettingCard />
      </Card>
      <Card className="share" value="서비스 공유하기">
        <ShareCard />
      </Card>
    </>
  );
};

```

![Untitled](Untitled%2034.png)

- 최종코드
    
    ```jsx
    import styled from "styled-components";
    
    const CardDiv = styled.div`
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #c4c4c4;
      margin-bottom: 20px;
      width: ${(props) => (props.className === "setting" ? "200px" : "400px")};
    `;
    
    const Card = (props) => {
      return (
        <CardDiv className={props.className}>
          <h3>{props.value}</h3>
          <hr />
          <div>{props.children}</div>
        </CardDiv>
      );
    };
    const SettingCard = () => {
      return (
        <>
          <button>초기화</button>
          <button>저장하기</button>
        </>
      );
    };
    const ShareCard = () => {
      return (
        <>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque ut
            eveniet, laudantium, deleniti autem sequi molestias magni quia, aliquam
            et praesentium nostrum dolores culpa cupiditate unde doloremque labore
            beatae accusamus.
          </p>
          <div>
            <button>이미지 저장</button>
            <button>트위터</button>
            <button>페이스북</button>
          </div>
        </>
      );
    };
    
    function App() {
      return (
        <>
          <Card className="setting" value="챌린지 설정">
            <SettingCard />
          </Card>
          <Card className="share" value="서비스 공유하기">
            <ShareCard />
          </Card>
        </>
      );
    }
    
    export default App;
    ```
    

shareCard와 settingCard는 Card 컴포넌트의 자식입니다. Card 컴포넌트의 입장에서 어떤 자식이 들어올지 미리 예상할 수 없습니다. 어떤 상황에는 버튼이 들어오고 어떤 상황에는 Div가 들어오고 상황마다 다르기 때문이죠.

자식으로 들어올 컴포넌트 형태의 경우의 수가 많을 경우에 부모는 children prop을 사용하여 자식 엘리먼트를 받습니다. 그리고 아래와 같이 자식을 넣어주면 됩니다.

```jsx
<Parent>
	<Child/>
</Parent>
```

---

자식의 자식을 넣을 경우, console 창에서 확인해 보세요.

```jsx
import styled from "styled-components";

const CardDiv = styled.div`
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #c4c4c4;
  margin-bottom: 20px;
  width: ${(props) => (props.className === 'setting' ? '200px':'400px')};
`;

const Card = (props) => {
  console.log(props)
  return (
     <>
      <h3>{props.value}</h3>
      <hr />
      <div>{props.children}</div>
    </>
  );
};

const ShareCard = () => {
  return (
    <>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque ut
        eveniet, laudantium, deleniti autem sequi molestias magni quia, aliquam
        et praesentium nostrum dolores culpa cupiditate unde doloremque labore
        beatae accusamus.
      </p>
      <div>
        <button>이미지 저장</button>
        <button>트위터</button>
        <button>페이스북</button>
      </div>
    </>
  );
};

const SettingCard = () => {
  return (
    <>
      <button>초기화</button>
      <button>저장하기</button>
    </>
  );
};

const Test = () => {
  return (
    <p>hello world</p>
  );
};

const TestTwo = () => {
  return (
    <p>hello world2</p>
  );
};

function App() {
  return (
    <>
      <Card cardClassName='setting' title='챌린지 설정'>
        <SettingCard/>
        <Test>
          <TestTwo/>
          <TestTwo/>
        </Test>
      </Card>
      <Card cardClassName='share' title='서비스 공유하기'>
        <ShareCard/>
      </Card>
    </>
  );
}

export default App;
```

실습 :
아래의 구조 처럼 여러가지 항목을 조합하여 만들 수 있는 카드 컴포넌트를 만들어 보세요.
`ContCard` 안의 각각의 컴포넌트는 별도의 파일로 생성할 필요는 없습니다.

```jsx
<ContCard>
  <ProductImage src={'https://picsum.photos/id/237/200/300'} alt={'검은강아지'} />
  <ProductTitle>검은 강아지를 입양하세요</ProductTitle>
  <ProductSubTitle>엄청 얌전하답니다. 우리개는 안물어요!</ProductSubTitle>
  <ProductDescription>Lorem ipsum dolor sit amet consectetur adipisicing elit. Alias distinctio sed molestias saepe reiciendis fugit illum enim et inventore, aliquam esse non nam consectetur minima atque consequuntur voluptates, eum quia.</ProductDescription>
  <ProductPrice />
</ContCard>
```