# 99. (ì°¸ê³ ) ì´ì „ ë²„ì „ì—ì„œ ë¦¬ì•¡íŠ¸ì—ì„œ ë¦¬ë•ìŠ¤ ì‚¬ìš©í•˜ê¸°(connect)

<aside>
ğŸ’¡ ì´ì œëŠ” ìì£¼ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” connect í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. í˜„ì¬ëŠ” useSelectorì™€ useDispatchë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ìë£ŒëŠ” ì°¸ê³ ë§Œ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.

</aside>

connection ê´€ë ¨ ê¸€

[9. connect í•¨ìˆ˜](https://react.vlpt.us/redux/09-connect.html)

### ë¦¬ë•ìŠ¤ ì„¤ì¹˜í•˜ê¸°

```bash
# npx create-react-app . // ì•ì—ì„œ ì³¤ë˜ ëª…ë ¹ì–´ ì…ë‹ˆë‹¤. ì„¤ì¹˜ê°€ ì„ í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
npm i react-redux
```

### ìµœì¢… ì½”ë“œ

<aside>
ğŸ’¡ connectê°€ ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ê°€ ë˜ì–´ì„œ ì¤‘ê°„ ë‹¨ê³„ë¥¼ ìƒëµí•˜ê³  ìµœì¢… ì½”ë“œë§Œ ì˜¬ë¦½ë‹ˆë‹¤.

</aside>

```jsx
import React from "react";
import { connect } from "react-redux";
import { addNumber,substractNumber } from "./store";

const App = ({ quantity, addNumber, substractNumber }) => {
  return (
    <div>
      <h2>ë”¥ëŸ¬ë‹ ê°œë°œì ë¬´ë¦ ë‹´ìš”</h2>
      <span>
        <strong>17,500</strong>ì›
      </span>
      <div id="counter-box">
        <button type="button" id="minus" onClick={substractNumber}>
          MINUS
        </button>
        <span id="number">{quantity}</span>
        <button id="plus" onClick={addNumber}>
          PLUS
        </button>
      </div>
      <div>
        ì´ ìˆ˜ëŸ‰ <strong id="quantity">{quantity}</strong>
      </div>
      <div>
        <strong id="total">{quantity * 17500}</strong>ì›
      </div>
    </div>
  );
};

const mapStateToProps = (state) => {
  return { quantity: state };
}

const mapDisPatchToProps = (dispatch) => {
  return {
    addNumber: (text) => dispatch(addNumber(text)),
    substractNumber: (text) => dispatch(substractNumber(text)),
  };
}

export default connect(mapStateToProps, mapDisPatchToProps)(App);
```

```jsx
import React from 'react';
// import ReactDOM from 'react-dom'; //êµ¬ë²„ì „
import { createRoot } from 'react-dom/client';
import App from './App';
import { Provider } from "react-redux";
import store from "./store";

const container = document.getElementById('root');
const root = createRoot(container);
root.render(<Provider store={store}><App tab="home" /></Provider>);
```

```jsx
import { createStore } from "redux";

export const addNumber = () => {
  return { type: "ADD" };
};

export const substractNumber = () => {
  return { type: "SUBSTRACT" };
};

const reducer = (state = 0, action) => {
  switch (action.type) {
    case "ADD":
      return state + 1;
    case "SUBSTRACT":
      return state - 1;
    default:
      return state;
  }
};

const store = createStore(reducer);

export default store;
```

```jsx
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>React App</title>
</head>

<body>
  <div id="root"></div>
</body>

</html>
```

/coll

---

![Untitled](Untitled%2069.png)

- íŒíŠ¸ì½”ë“œ(propsë¡œ ë˜ì–´ ìˆìŒ)
    
    ```jsx
    import React from "react";
    import { connect } from "react-redux";
    import { getInputValue } from "./store";
    
    function Four({ quantity }) {
      return (
        <div>
          <h1>Four</h1>
          <p>{quantity}</p>
        </div>
      );
    }
    
    function Three({ quantity }) {
      return (
        <div>
          <h1>Three</h1>
          <Four quantity={quantity} />
        </div>
      );
    }
    
    function Two({ quantity }) {
      return (
        <div>
          <h1>Two</h1>
          <Three quantity={quantity} />
        </div>
      );
    }
    
    function One({ quantity }) {
      return (
        <div>
          <h1>One</h1>
          <Two quantity={quantity} />
        </div>
      );
    }
    
    function Input({ getInputValue }) {
      return (
        <div>
          <input id="test" type="text" />
          <button onClick={getInputValue}>ëˆŒëŸ¬!</button>
        </div>
      );
    }
    
    const App = ({ quantity, getInputValue }) => {
      return (
        <div>
          <One quantity={quantity} />
          <Input getInputValue={getInputValue} />
        </div>
      );
    };
    
    const mapStateToProps = (state) => {
      return { quantity: state };
    };
    
    const mapDisPatchToProps = (dispatch) => {
      return {
        getInputValue: (text) => dispatch(getInputValue(text)),
      };
    };
    
    export default connect(mapStateToProps, mapDisPatchToProps)(App);
    ```
    
    ```html
    <!DOCTYPE html>
    <html>
      <head>
        <title>React App</title>
        <style>
          div {
              border: solid 10px blue;
              margin: 10px;
              padding: 10px;
          }
      </style>
      </head>
      <body>
        <div id="root"></div>
      </body>
    </html>
    ```
    
    ```jsx
    import { createStore } from "redux";
    
    export const getInputValue = () => {
      return { type: "READ" };
    };
    
    const reducer = (state, action) => {
    
      const value = document.querySelector('#test').value;
      console.log(value);
    
      switch (action.type) {
        case "READ":
          return value;
        default:
          return state;
      }
    };
    
    const store = createStore(reducer);
    
    export default store;
    ```
    
    ```jsx
    import React from 'react';
    import ReactDOM from 'react-dom';
    import App from './App';
    import { Provider } from "react-redux";
    import store from "./store";
    
    ReactDOM.render(
      <Provider store={store}>
        <App />
      </Provider>,
      document.getElementById("root")
    );
    ```
    

---

- ì •ë‹µì½”ë“œ
    
    ```jsx
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <title>React App</title>
        <style>
          div {
              border: solid 10px blue;
              margin: 10px;
              padding: 10px;
          }
        </style>
      </head>
      <body>
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <div id="root"></div>
      </body>
    </html>
    ```
    
    ```jsx
    import React from 'react';
    import ReactDOM from 'react-dom';
    import App from './App';
    import { Provider } from "react-redux";
    import store from "./store";
    
    ReactDOM.render(
      <Provider store={store}>
        <App />
      </Provider>,
      document.getElementById("root")
    );
    ```
    
    ```jsx
    import { createStore } from "redux";
    
    const initailState={
        quantity:0
    }
    
    export const getInputValue = () => {
      return { type: "READ" };
    };
    
    export const setInputValue = () => {
        return { type: "WRITE" };
    };
    
    const reducer = (state=initailState, action) => {
      switch (action.type) {
        case "READ":
            console.log(...state)
          return {...state};
        
        case "WRITE":
            console.log({...state})
            return {...state, quantity:document.querySelector('#test').value}
        default:
          return state;
      }
    };
    
    const store = createStore(reducer);
    
    export default store;
    ```
    
    ```jsx
    import React from "react";
    import { connect, useDispatch } from "react-redux";
    import store, { getInputValue,setInputValue } from "./store";
    
    function Four() {
      const {quantity} = store.getState()
      
      return(
        <div>
          <h1>Four</h1>
          <p>{quantity}</p>
        </div>
      )
    }
    
    function Three() {
      return(
        <div>
          <h1>Three</h1>
          <Four/>
        </div>
      )
    }
    
    function Two() {
      return(
        <div>
          <h1>Two</h1>
          <Three/>
        </div>
      )
    }
    
    function One() {
      return(
        <div>
          <h1>One</h1>
          <Two/>
        </div>
      )
    }
    
    function Input() {
      const dispatch = useDispatch()
      return(
        <div>
          <input id="test" type="text"/>
          <button onClick={()=>dispatch(setInputValue())}>ëˆŒëŸ¬!</button>
        </div>
      )
    }
    
    const App = () => {
      return (
        <div>
          <One/>
          <Input/>
        </div>
      );
    };
    
    const mapStateToProps = (state) => {
      return { quantity: state };
    }
    
    const mapDisPatchToProps = (dispatch) => {
      return {
        getInputValue: (text) => dispatch(getInputValue(text)),
      };
    }
    
    export default connect(mapStateToProps, mapDisPatchToProps)(App);
    ```